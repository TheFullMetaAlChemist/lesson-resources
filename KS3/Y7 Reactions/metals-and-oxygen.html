<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Metals and Oxygen Reactions - Year 7 Chemistry</title>
    <style>
        :root {
            --primary: #3498db;
            --secondary: #2ecc71;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --correct: #27ae60;
            --incorrect: #e74c3c;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f9f9f9;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background-color: white;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            min-height: 100vh;
            position: relative;
        }
        
        header {
            text-align: center;
            padding: 20px 0;
            background-color: var(--primary);
            color: white;
            border-radius: 8px 8px 0 0;
            margin-bottom: 20px;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        h2 {
            font-size: 1.8rem;
            margin: 20px 0;
            color: var(--primary);
        }
        
        h3 {
            font-size: 1.4rem;
            margin: 15px 0;
            color: var(--dark);
        }
        
        p {
            margin-bottom: 15px;
        }
        
        .screen {
            display: none;
            padding: 20px;
            animation: fadeIn 0.5s;
        }
        
        .screen.active {
            display: block;
        }
        
        .navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid #e0e0e0;
        }
        
        button {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s, transform 0.1s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        button:active {
            transform: scale(0.98);
        }
        
        button.check {
            background-color: var(--secondary);
        }
        
        button.check:hover {
            background-color: #27ae60;
        }
        
        button.next {
            background-color: var(--secondary);
        }
        
        button.prev {
            background-color: var(--dark);
        }
        
        button.disabled {
            background-color: #bdc3c7;
            cursor: not-allowed;
        }
        
        .progress-bar {
            height: 10px;
            background-color: #e0e0e0;
            border-radius: 5px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background-color: var(--secondary);
            transition: width 0.3s;
        }
        
        input[type="text"], textarea {
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
            margin: 5px 0;
            width: 100%;
        }
        
        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 4px;
            display: none;
        }
        
        .feedback.success {
            display: block;
            background-color: #d4edda;
            color: var(--correct);
            border: 1px solid #c3e6cb;
        }
        
        .feedback.error {
            display: block;
            background-color: #f8d7da;
            color: var(--incorrect);
            border: 1px solid #f5c6cb;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
            border: 1px solid #ddd;
        }
        
        th {
            background-color: var(--primary);
            color: white;
        }
        
        .quiz-container {
            margin: 20px 0;
        }
        
        .question {
            margin-bottom: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .options {
            margin-top: 10px;
        }
        
        .option {
            display: block;
            margin: 10px 0;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        
        .option:hover {
            background-color: #f1f1f1;
        }
        
        .option.selected {
            background-color: #d6eaf8;
            border-color: var(--primary);
        }
        
        .option.correct {
            background-color: #d4edda;
            border-color: var(--correct);
        }
        
        .option.incorrect {
            background-color: #f8d7da;
            border-color: var(--incorrect);
        }
        
        .result {
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .match-game {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
        }
        
        .terms, .definitions {
            width: 48%;
        }
        
        .term, .definition {
            padding: 10px;
            margin: 10px 0;
            background-color: #f8f9fa;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
        }
        
        .term.selected, .definition.selected {
            background-color: #d6eaf8;
            border-color: var(--primary);
        }
        
        .term.matched, .definition.matched {
            background-color: #d4edda;
            border-color: var(--correct);
            cursor: default;
        }
        
        .matching-line {
            position: absolute;
            height: 2px;
            background-color: var(--primary);
            transform-origin: 0 50%;
            z-index: 10;
        }
        
        .fill-blanks {
            margin: 20px 0;
        }
        
        .blank {
            display: inline-block;
            width: 120px;
            margin: 0 5px;
        }
        
        .word-bank {
            display: flex;
            flex-wrap: wrap;
            margin: 20px 0;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .word {
            margin: 5px;
            padding: 8px 12px;
            background-color: var(--primary);
            color: white;
            border-radius: 20px;
            cursor: pointer;
        }
        
        .word.used {
            background-color: #bdc3c7;
            cursor: default;
        }
        
        @keyframes fadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        .drag-item {
            padding: 10px;
            margin: 10px 0;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 4px;
            cursor: pointer;
            user-select: none;
        }

        .drag-container {
            min-height: 50px;
            border: 2px dashed #ccc;
            border-radius: 4px;
            padding: 10px;
            margin-bottom: 20px;
        }

        .dragging {
            opacity: 0.5;
        }

        .correct-answer {
            color: var(--correct);
            font-weight: bold;
            display: none;
        }

        .menu-bar {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }

        .menu-button {
            padding: 8px 16px;
            background-color: var(--light);
            color: var(--dark);
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .menu-button.active {
            background-color: var(--primary);
            color: white;
        }

        .equation-input {
            width: 200px;
            display: inline-block;
        }

        .save-status {
            position: fixed;
            bottom: 20px;
            right: 20px;
            padding: 10px;
            background-color: rgba(0, 0, 0, 0.7);
            color: white;
            border-radius: 4px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s;
        }

        .save-status.show {
            opacity: 1;
        }

        .radio-group {
            margin: 10px 0;
        }

        .radio-option {
            margin: 5px 0;
        }

        .paragraph-style {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            line-height: 2;
            margin: 20px 0;
        }
        
        .paragraph-style p {
            font-size: 1.1rem;
        }

        .mg-stages {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        
        .mg-stage {
            width: 32%;
            min-width: 250px;
            text-align: center;
            padding: 15px;
            background-color: #f9f9f9;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }
        
        .stage-image {
            height: 150px;
            background-color: #f0f0f0;
            border: 1px solid #ddd;
            border-radius: 8px;
            margin-bottom: 15px;
            position: relative;
        }
        
        .mg-ribbon-image {
            width: 150px;
            height: 15px;
            background: linear-gradient(90deg, #c0c0c0, #e0e0e0, #c0c0c0);
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }
        
        .mg-flame-image {
            width: 100px;
            height: 130px;
            background: radial-gradient(ellipse at center, rgba(255,255,255,1) 0%, rgba(255,240,180,0.8) 40%, rgba(255,160,80,0.4) 80%, rgba(255,120,50,0) 100%);
            position: absolute;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 50% 50% 30% 30%;
            box-shadow: 0 0 20px 10px rgba(255,255,255,0.5);
        }
        
        .mg-oxide-image {
            width: 150px;
            height: 15px;
            background-color: white;
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            border: 2px solid #aaa;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        
        .mg-stage h4 {
            margin: 10px 0;
            color: var(--primary);
        }
        
        .mg-stage p {
            font-size: 0.95rem;
            text-align: left;
        }
        
        .question-item {
            margin-bottom: 30px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 8px;
        }
        
        .concept-card {
            margin-bottom: 30px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            overflow: hidden;
        }
        
        .concept-card h3 {
            background-color: var(--primary);
            color: white;
            padding: 10px 15px;
            margin: 0;
        }
        
        .concept-content {
            display: flex;
            padding: 15px;
            flex-wrap: wrap;
        }
        
        .concept-image {
            width: 200px;
            margin-right: 20px;
            margin-bottom: 15px;
        }
        
        .concept-image img {
            width: 100%;
            border-radius: 4px;
            border: 1px solid #ddd;
        }
        
        .concept-text {
            flex: 1;
            min-width: 280px;
        }
        
        .equation {
            background-color: #f5f5f5;
            padding: 10px;
            border-radius: 4px;
            font-weight: bold;
            text-align: center;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Metals and Oxygen Reactions</h1>
            <p>Year 7 Chemistry Interactive Lesson</p>
        </header>
        
        <div class="menu-bar">
            <button class="menu-button active" data-screen="welcome">Welcome</button>
            <button class="menu-button" data-screen="key-concepts">Key Concepts</button>
            <button class="menu-button" data-screen="task1">Task 1</button>
            <button class="menu-button" data-screen="task2">Task 2</button>
            <button class="menu-button" data-screen="task3">Task 3</button>
            <button class="menu-button" data-screen="task4">Task 4</button>
            <button class="menu-button" data-screen="task5">Task 5</button>
            <button class="menu-button" data-screen="task6">Task 6</button>
            <button class="menu-button" data-screen="task7">Task 7</button>
            <button class="menu-button" data-screen="task8">Task 8</button>
            <button class="menu-button" data-screen="task9">Task 9</button>
            <button class="menu-button" data-screen="task10">Task 10</button>
            <button class="menu-button" data-screen="quiz">Quiz</button>
        </div>
        
        <div class="progress-bar">
            <div class="progress" id="progress"></div>
        </div>
        
        <!-- Welcome Screen -->
        <div id="welcome" class="screen active">
            <h2>Welcome to the Metals and Oxygen Reactions Lesson!</h2>
            <p>In this interactive lesson, you will learn about how different metals react with oxygen.</p>
            <p>You'll explore:</p>
            <ul>
                <li>What happens when metals combine with oxygen</li>
                <li>The products formed during these reactions</li>
                <li>Why some metals react more readily than others</li>
                <li>Real-world applications of metal-oxygen reactions</li>
            </ul>
            <p>This lesson includes interactive activities, a quiz, and a fun game to help you understand the concepts.</p>
            <p>Your progress will be automatically saved, so you can return to where you left off.</p>
            <p>Click "Next" to start the lesson, or use the menu bar above to navigate to a specific task.</p>
            
            <div class="navigation">
                <button class="prev disabled">Previous</button>
                <button class="next" data-next="key-concepts">Next</button>
            </div>
        </div>
        
        <!-- Key Concepts Screen -->
        <div id="key-concepts" class="screen">
            <h2>Key Concepts: Metals and Oxygen Reactions</h2>
            
            <div class="concept-card">
                <h3>Metal Reactivity</h3>
                <div class="concept-content">
                    <div class="concept-image">
                        <img src="images/reactivity-series.png" alt="Metal reactivity series" />
                    </div>
                    <div class="concept-text">
                        <p>Different metals react with oxygen at different rates. Some metals, like potassium and sodium, are extremely reactive, while others like gold and platinum are very unreactive.</p>
                        <p>This difference in reactivity creates what we call the <strong>reactivity series</strong> - a way to rank metals from most to least reactive. Generally, the more reactive a metal is with oxygen, the more reactive it will be with other substances like water and acids.</p>
                    </div>
                </div>
            </div>
            
            <div class="concept-card">
                <h3>Metal Oxides</h3>
                <div class="concept-content">
                    <div class="concept-image">
                        <img src="images/magnesium-burning.png" alt="Metal oxide formation" />
                    </div>
                    <div class="concept-text">
                        <p>When metals react with oxygen, they form <strong>metal oxides</strong>. The general equation is:</p>
                        <p class="equation">Metal + Oxygen → Metal Oxide</p>
                        <p>For example, when magnesium reacts with oxygen, it forms magnesium oxide:</p>
                        <p class="equation">Magnesium + Oxygen → Magnesium Oxide</p>
                    </div>
                </div>
            </div>
            
            <div class="concept-card">
                <h3>Copper Patina: The Statue of Liberty</h3>
                <div class="concept-content">
                    <div class="concept-image">
                        <img src="images/statue-of-liberty.png" alt="Statue of Liberty patina" />
                    </div>
                    <div class="concept-text">
                        <p>Did you know the Statue of Liberty was originally the color of a penny? It's made of copper, which naturally reacts with oxygen and carbon dioxide in moist air to form a greenish coating called <strong>patina</strong>.</p>
                        <p>This patina is a mixture of copper carbonate and copper hydroxide. It takes many years to develop fully, but once formed, it actually protects the copper underneath from further corrosion. This is why the Statue of Liberty has maintained its structure despite being exposed to the elements since 1886!</p>
                    </div>
                </div>
            </div>
            
            <div class="concept-card">
                <h3>Aluminum's Protective Oxide Layer</h3>
                <div class="concept-content">
                    <div class="concept-image">
                        <img src="images/aluminium-oxide-layer.png" alt="Aluminum oxide layer" />
                    </div>
                    <div class="concept-text">
                        <p>Aluminum is actually a very reactive metal - more reactive than iron! However, aluminum doesn't rust like iron does. Why?</p>
                        <p>When aluminum reacts with oxygen, it forms a thin, transparent layer of aluminum oxide that tightly adheres to the surface. This oxide layer is protective - it prevents oxygen from reaching the aluminum underneath, stopping further oxidation.</p>
                        <p>This is why aluminum is widely used in applications like aircraft bodies, window frames, and food packaging, despite being highly reactive. It's an example of how understanding metal-oxygen reactions helps us choose the right materials for different applications.</p>
                    </div>
                </div>
            </div>
            
            <div class="concept-card">
                <h3>Rusting: Iron Oxide Formation</h3>
                <div class="concept-content">
                    <div class="concept-image">
                        <img src="images/rust.png" alt="Rusting process" />
                    </div>
                    <div class="concept-text">
                        <p>When iron reacts with oxygen in the presence of water, it forms iron oxide, commonly known as <strong>rust</strong>. Unlike aluminum oxide, rust does not form a protective layer - it flakes off, exposing more iron to oxygen.</p>
                        <p>This is why iron objects need to be protected with paint, oil, or other coatings to prevent them from rusting. Without protection, an iron object left outside will eventually rust away completely!</p>
                    </div>
                </div>
            </div>
            
            <div class="navigation">
                <button class="prev" data-prev="welcome">Previous</button>
                <button class="next" data-next="task1">Next</button>
            </div>
        </div>
        
        <!-- Task 1: Match up -->
        <div id="task1" class="screen">
            <h2>Task 1: Match up!</h2>
            <h3>Basic Knowledge</h3>
            <p>Match each term with the correct definition by clicking on a term and then on its matching definition.</p>
            
            <div class="match-game">
                <div class="terms">
                    <h3>Terms</h3>
                    <div class="term" data-id="3">Reactive metal</div>
                    <div class="term" data-id="1">Oxidation</div>
                    <div class="term" data-id="4">Unreactive metal</div>
                    <div class="term" data-id="2">Metal oxide</div>
                </div>
                <div class="definitions">
                    <h3>Definitions</h3>
                    <div class="definition" data-id="4">A metal that doesn't easily react with other substances</div>
                    <div class="definition" data-id="2">The product formed when a metal reacts with oxygen</div>
                    <div class="definition" data-id="1">When a substance combines with oxygen</div>
                    <div class="definition" data-id="3">A metal that reacts easily with other substances</div>
                </div>
            </div>
            
            <div class="feedback" id="task1-feedback"></div>
            
            <button class="check" id="check-task1">Check Answers</button>
            
            <div class="navigation">
                <button class="prev" data-prev="key-concepts">Previous</button>
                <button class="next" data-next="task2">Next</button>
            </div>
        </div>
        
        <!-- Task 2: Fill in the blanks -->
        <div id="task2" class="screen">
            <h2>Task 2: Fill in the blanks</h2>
            <h3>Basic Comprehension</h3>
            <p>Complete the paragraph below using words from the word bank:</p>
            
            <div class="word-bank">
                <div class="word" data-word="oxide">oxide</div>
                <div class="word" data-word="vigorously">vigorously</div>
                <div class="word" data-word="reactivity">reactivity</div>
                <div class="word" data-word="unreactive">unreactive</div>
                <div class="word" data-word="magnesium">magnesium</div>
                <div class="word" data-word="gold">gold</div>
                <div class="word" data-word="rusty">rusty</div>
            </div>
            
            <div class="fill-blanks paragraph-style">
                <p>
                    When metals react with oxygen, they form metal <input type="text" class="blank" data-answer="oxide">.
                    <input type="text" class="blank" data-answer="magnesium"> burns very 
                    <input type="text" class="blank" data-answer="vigorously"> in oxygen with a bright white flame.
                    The <input type="text" class="blank" data-answer="reactivity"> of a metal tells us how easily it will 
                    react with oxygen. <input type="text" class="blank" data-answer="gold"> is an 
                    <input type="text" class="blank" data-answer="unreactive"> metal, which is why it stays shiny and 
                    doesn't tarnish. When iron reacts with oxygen and water, it becomes 
                    <input type="text" class="blank" data-answer="rusty">.
                </p>
            </div>
            
            <div class="feedback" id="task2-feedback"></div>
            
            <button class="check" id="check-task2">Check Answers</button>
            
            <div class="navigation">
                <button class="prev" data-prev="task1">Previous</button>
                <button class="next" data-next="task3">Next</button>
            </div>
        </div>
        
        <!-- Task 3: Word Equations -->
        <div id="task3" class="screen">
            <h2>Task 3: Word Equations</h2>
            <h3>Basic Application</h3>
            <p>Write word equations for these reactions of metals with oxygen. The first one is done for you.</p>
            
            <div class="equations">
                <p>1. Magnesium + Oxygen → Magnesium Oxide</p>
                <p>2. Zinc + Oxygen → <input type="text" class="equation-input" data-answer="Zinc Oxide"></p>
                <p>3. Iron + Oxygen → <input type="text" class="equation-input" data-answer="Iron Oxide"></p>
                <p>4. Copper + Oxygen → <input type="text" class="equation-input" data-answer="Copper Oxide"></p>
                <p>5. Potassium + Oxygen → <input type="text" class="equation-input" data-answer="Potassium Oxide"></p>
            </div>
            
            <div class="feedback" id="task3-feedback"></div>
            
            <button class="check" id="check-task3">Check Answers</button>
            
            <div class="navigation">
                <button class="prev" data-prev="task2">Previous</button>
                <button class="next" data-next="task4">Next</button>
            </div>
        </div>
        
        <!-- Task 4: Ordering Reactivity -->
        <div id="task4" class="screen">
            <h2>Task 4: Ordering Reactivity</h2>
            <h3>Medium Challenge</h3>
            <p>Using the information from your lesson, arrange these metals in order from MOST reactive with oxygen to LEAST reactive. Drag and drop the metals into the correct order.</p>
            
            <div class="metals-container">
                <div id="metals-list">
                    <div class="drag-item" draggable="true" data-metal="Gold">Gold</div>
                    <div class="drag-item" draggable="true" data-metal="Magnesium">Magnesium</div>
                    <div class="drag-item" draggable="true" data-metal="Iron">Iron</div>
                    <div class="drag-item" draggable="true" data-metal="Copper">Copper</div>
                    <div class="drag-item" draggable="true" data-metal="Zinc">Zinc</div>
                </div>
                
                <h3>Most reactive to least reactive:</h3>
                <div id="metals-order" class="drag-container"></div>
            </div>
            
            <div class="feedback" id="task4-feedback"></div>
            <div class="correct-answer" id="task4-correct">Correct order: Magnesium → Zinc → Iron → Copper → Gold</div>
            
            <button class="check" id="check-task4">Check Answers</button>
            
            <div class="navigation">
                <button class="prev" data-prev="task3">Previous</button>
                <button class="next" data-next="task5">Next</button>
            </div>
        </div>
        
        <!-- Task 5: True or False -->
        <div id="task5" class="screen">
            <h2>Task 5: True or False?</h2>
            <h3>Medium Challenge</h3>
            <p>Decide whether these statements are true or false. If false, rewrite the statement to make it correct.</p>
            
            <div class="true-false">
                <div class="question-item">
                    <p>1. All metals react with oxygen at the same rate.</p>
                    <div class="radio-group">
                        <label class="radio-option"><input type="radio" name="q1" value="true"> True</label>
                        <label class="radio-option"><input type="radio" name="q1" value="false"> False</label>
                    </div>
                    <div class="correction-container" style="display: none;">
                        <p>If false, rewrite the statement correctly:</p>
                        <textarea id="correction1" rows="2"></textarea>
                        <div class="correct-answer">Correct: Different metals react with oxygen at different rates.</div>
                    </div>
                </div>
                
                <div class="question-item">
                    <p>2. Gold is unreactive and doesn't form an oxide layer.</p>
                    <div class="radio-group">
                        <label class="radio-option"><input type="radio" name="q2" value="true"> True</label>
                        <label class="radio-option"><input type="radio" name="q2" value="false"> False</label>
                    </div>
                    <div class="correction-container" style="display: none;">
                        <p>If false, rewrite the statement correctly:</p>
                        <textarea id="correction2" rows="2"></textarea>
                        <div class="correct-answer">Correct: This statement is true.</div>
                    </div>
                </div>
                
                <div class="question-item">
                    <p>3. Magnesium only reacts with oxygen when heated.</p>
                    <div class="radio-group">
                        <label class="radio-option"><input type="radio" name="q3" value="true"> True</label>
                        <label class="radio-option"><input type="radio" name="q3" value="false"> False</label>
                    </div>
                    <div class="correction-container" style="display: none;">
                        <p>If false, rewrite the statement correctly:</p>
                        <textarea id="correction3" rows="2"></textarea>
                        <div class="correct-answer">Correct: This statement is true. Magnesium requires heat to overcome the activation energy to start reacting with oxygen.</div>
                    </div>
                </div>
                
                <div class="question-item">
                    <p>4. Metals that react vigorously with oxygen usually react vigorously with acids too.</p>
                    <div class="radio-group">
                        <label class="radio-option"><input type="radio" name="q4" value="true"> True</label>
                        <label class="radio-option"><input type="radio" name="q4" value="false"> False</label>
                    </div>
                    <div class="correction-container" style="display: none;">
                        <p>If false, rewrite the statement correctly:</p>
                        <textarea id="correction4" rows="2"></textarea>
                        <div class="correct-answer">Correct: This statement is true. A metal's reactivity tends to be consistent across different types of reactions.</div>
                    </div>
                </div>
                
                <div class="question-item">
                    <p>5. Copper burns with a bright flame when heated in oxygen.</p>
                    <div class="radio-group">
                        <label class="radio-option"><input type="radio" name="q5" value="true"> True</label>
                        <label class="radio-option"><input type="radio" name="q5" value="false"> False</label>
                    </div>
                    <div class="correction-container" style="display: none;">
                        <p>If false, rewrite the statement correctly:</p>
                        <textarea id="correction5" rows="2"></textarea>
                        <div class="correct-answer">Correct: Copper does not burn with a bright flame. It reacts slowly with oxygen when heated to form black copper oxide.</div>
                    </div>
                </div>
            </div>
            
            <div class="feedback" id="task5-feedback"></div>
            
            <button class="check" id="check-task5">Check Answers</button>
            
            <div class="navigation">
                <button class="prev" data-prev="task4">Previous</button>
                <button class="next" data-next="task6">Next</button>
            </div>
        </div>
        
        <!-- Task 6: Draw and Explain -->
        <div id="task6" class="screen">
            <h2>Task 6: Draw and Explain</h2>
            <h3>Medium Application</h3>
            <p>Examine the stages of a magnesium ribbon burning in oxygen, then answer the questions below.</p>
            
            <div class="mg-stages">
                <div class="mg-stage">
                    <div class="stage-image">
                        <div class="mg-ribbon-image"></div>
                    </div>
                    <h4>Stage 1: Before Burning</h4>
                    <p>Magnesium appears as a shiny, silver-colored metal ribbon.</p>
                </div>
                
                <div class="mg-stage">
                    <div class="stage-image">
                        <div class="mg-ribbon-image"></div>
                        <div class="mg-flame-image"></div>
                    </div>
                    <h4>Stage 2: During Burning</h4>
                    <p>Magnesium burns with an extremely bright white flame. The light is so intense it can damage eyes if viewed directly.</p>
                </div>
                
                <div class="mg-stage">
                    <div class="stage-image">
                        <div class="mg-oxide-image"></div>
                    </div>
                    <h4>Stage 3: After Burning</h4>
                    <p>The reaction produces white magnesium oxide powder. The reaction is: Magnesium + Oxygen → Magnesium Oxide</p>
                </div>
            </div>
            
            <div class="questions">
                <p>Describe what magnesium looks like before burning:</p>
                <textarea id="before-burning" rows="2"></textarea>
                
                <p>Describe what happens during the reaction:</p>
                <textarea id="during-reaction" rows="2"></textarea>
                
                <p>Describe what the product (magnesium oxide) looks like:</p>
                <textarea id="after-reaction" rows="2"></textarea>
                
                <p>Write the word equation for the reaction:</p>
                <textarea id="word-equation" rows="2"></textarea>
            </div>
            
            <div class="sample-answers" style="display: none;">
                <h3>Sample Answers:</h3>
                <p><strong>Before burning:</strong> Magnesium is a shiny, silver-colored metal that comes in the form of a ribbon.</p>
                <p><strong>During the reaction:</strong> Magnesium burns with a very bright, white flame that can be difficult to look at directly. The reaction is exothermic (gives off heat).</p>
                <p><strong>After reaction:</strong> Magnesium oxide is a white, powdery substance. It's much more brittle than the original metal.</p>
                <p><strong>Word equation:</strong> Magnesium + Oxygen → Magnesium Oxide</p>
            </div>
            
            <button id="show-sample-answers">Show Sample Answers</button>
            
            <div class="navigation">
                <button class="prev" data-prev="task5">Previous</button>
                <button class="next" data-next="task7">Next</button>
            </div>
        </div>
        
        <!-- Task 7: Predict and Explain -->
        <div id="task7" class="screen">
            <h2>Task 7: Predict and Explain</h2>
            <h3>Higher Challenge</h3>
            <p>For each scenario below, predict what will happen and explain your reasoning.</p>
            
            <div class="scenarios">
                <div class="scenario">
                    <h3>1. A gold ring is left outside for 10 years.</h3>
                    <p>Prediction:</p>
                    <textarea id="gold-prediction" rows="2"></textarea>
                    <p>Explanation:</p>
                    <textarea id="gold-explanation" rows="3"></textarea>
                </div>
                
                <div class="scenario">
                    <h3>2. An iron nail is left in the garden for a month.</h3>
                    <p>Prediction:</p>
                    <textarea id="iron-prediction" rows="2"></textarea>
                    <p>Explanation:</p>
                    <textarea id="iron-explanation" rows="3"></textarea>
                </div>
                
                <div class="scenario">
                    <h3>3. A copper roof is exposed to air for many years.</h3>
                    <p>Prediction:</p>
                    <textarea id="copper-prediction" rows="2"></textarea>
                    <p>Explanation:</p>
                    <textarea id="copper-explanation" rows="3"></textarea>
                </div>
            </div>
            
            <div class="sample-answers-7" style="display: none;">
                <h3>Sample Answers:</h3>
                <div class="sample">
                    <h4>Gold ring:</h4>
                    <p><strong>Prediction:</strong> The gold ring will remain largely unchanged.</p>
                    <p><strong>Explanation:</strong> Gold is a very unreactive metal that does not readily react with oxygen. This is why gold jewelry stays shiny for centuries and why it's valued for its permanence.</p>
                </div>
                
                <div class="sample">
                    <h4>Iron nail:</h4>
                    <p><strong>Prediction:</strong> The iron nail will rust (become covered in reddish-brown iron oxide).</p>
                    <p><strong>Explanation:</strong> Iron reacts with oxygen and moisture in the air to form iron oxide (rust). This reaction happens relatively quickly, especially in damp conditions like a garden.</p>
                </div>
                
                <div class="sample">
                    <h4>Copper roof:</h4>
                    <p><strong>Prediction:</strong> The copper roof will develop a greenish coating (patina).</p>
                    <p><strong>Explanation:</strong> Copper reacts slowly with oxygen, carbon dioxide and water in the air to form a green patina (copper carbonate). This reaction is much slower than rusting of iron but happens over many years.</p>
                </div>
            </div>
            
            <button id="show-sample-answers-7">Show Sample Answers</button>
            
            <div class="navigation">
                <button class="prev" data-prev="task6">Previous</button>
                <button class="next" data-next="task8">Next</button>
            </div>
        </div>
        
        <!-- Task 8: Real-World Applications -->
        <div id="task8" class="screen">
            <h2>Task 8: Real-World Applications</h2>
            <h3>Higher Challenge</h3>
            <p>Answer these questions about how we use our knowledge of metal reactions in everyday life.</p>
            
            <div class="applications">
                <div class="application">
                    <h3>1. Why are some bicycles made with aluminum frames rather than iron frames?</h3>
                    <textarea id="bicycle-answer" rows="3"></textarea>
                </div>
                
                <div class="application">
                    <h3>2. Why might gold be used for electrical connections in expensive audio equipment?</h3>
                    <textarea id="gold-answer" rows="3"></textarea>
                </div>
                
                <div class="application">
                    <h3>3. Why do we often paint or coat iron objects that will be used outdoors?</h3>
                    <textarea id="iron-answer" rows="3"></textarea>
                </div>
            </div>
            
            <div class="sample-answers-8" style="display: none;">
                <h3>Sample Answers:</h3>
                <div class="sample">
                    <h4>Bicycle frames:</h4>
                    <p>Aluminum forms a protective oxide layer that prevents further corrosion, unlike iron which continues to rust. Aluminum is also lighter than iron while still being strong, making it ideal for bicycles.</p>
                </div>
                
                <div class="sample">
                    <h4>Gold electrical connections:</h4>
                    <p>Gold is used because it doesn't react with oxygen, which ensures a consistently good electrical connection over time. Other metals can form oxide layers that increase electrical resistance and degrade sound quality.</p>
                </div>
                
                <div class="sample">
                    <h4>Painting iron objects:</h4>
                    <p>Iron objects are painted or coated to create a barrier that prevents oxygen and moisture from reaching the metal surface. This prevents rusting, which would weaken the structure and eventually cause it to fail.</p>
                </div>
            </div>
            
            <button id="show-sample-answers-8">Show Sample Answers</button>
            
            <div class="navigation">
                <button class="prev" data-prev="task7">Previous</button>
                <button class="next" data-next="task9">Next</button>
            </div>
        </div>
        
        <!-- Task 9: Investigation Design -->
        <div id="task9" class="screen">
            <h2>Task 9: Investigation Design</h2>
            <h3>Advanced Application</h3>
            <p>Design a simple experiment to test which of three metals (iron, copper, and aluminum) is most reactive with oxygen.</p>
            
            <div class="experiment-design">
                <h3>What you would need:</h3>
                <textarea id="experiment-materials" rows="3"></textarea>
                
                <h3>The steps you would take:</h3>
                <textarea id="experiment-steps" rows="5"></textarea>
                
                <h3>What you would observe:</h3>
                <textarea id="experiment-observations" rows="3"></textarea>
                
                <h3>How you would record your results:</h3>
                <textarea id="experiment-recording" rows="3"></textarea>
                
                <h3>What safety precautions you would take:</h3>
                <textarea id="experiment-safety" rows="3"></textarea>
            </div>
            
            <div class="sample-experiment" style="display: none;">
                <h3>Sample Experiment Design:</h3>
                <h4>Materials needed:</h4>
                <ul>
                    <li>Samples of iron, copper, and aluminum of similar size</li>
                    <li>3 test tubes or beakers</li>
                    <li>Water</li>
                    <li>Ruler or caliper</li>
                    <li>Digital camera or smartphone</li>
                    <li>Safety goggles</li>
                    <li>Timer or stopwatch</li>
                </ul>
                
                <h4>Steps:</h4>
                <ol>
                    <li>Clean all metal samples to remove any existing oxide layer</li>
                    <li>Measure and record the initial appearance of each metal</li>
                    <li>Place each metal in a separate test tube</li>
                    <li>Add a small amount of water to each test tube to accelerate oxidation</li>
                    <li>Place all test tubes in the same location to ensure similar environmental conditions</li>
                    <li>Observe the metals daily for two weeks</li>
                </ol>
                
                <h4>Observations:</h4>
                <p>Look for color changes, formation of oxide layers, and any visible signs of reaction. The metal that shows signs of oxidation fastest is the most reactive with oxygen.</p>
                
                <h4>Recording results:</h4>
                <p>Create a table with days along one axis and metals along the other. Record observations daily, including photographs and descriptions of any changes.</p>
                
                <h4>Safety precautions:</h4>
                <p>Wear safety goggles when cleaning metals, handle sharp metal edges carefully, and wash hands after handling the metals. Keep the experiment away from food preparation areas.</p>
            </div>
            
            <button id="show-sample-experiment">Show Sample Experiment</button>
            
            <div class="navigation">
                <button class="prev" data-prev="task8">Previous</button>
                <button class="next" data-next="task10">Next</button>
            </div>
        </div>
        
        <!-- Task 10: Creative Challenge -->
        <div id="task10" class="screen">
            <h2>Task 10: Creative Challenge</h2>
            <h3>Advanced Application</h3>
            <p>Imagine you are designing a monument that needs to stand outside for 100 years without deteriorating.</p>
            
            <div class="creative-challenge">
                <h3>1. Which metal(s) would you choose to use and why?</h3>
                <textarea id="metals-to-use" rows="3"></textarea>
                
                <h3>2. Which metal(s) would you avoid using and why?</h3>
                <textarea id="metals-to-avoid" rows="3"></textarea>
                
                <h3>3. What measures could you take to protect any less resistant metals that you might need to use?</h3>
                <textarea id="protection-measures" rows="3"></textarea>
                
                <h3>Write a paragraph explaining your choices and reasoning:</h3>
                <textarea id="creative-paragraph" rows="6"></textarea>
            </div>
            
            <div class="navigation">
                <button class="prev" data-prev="task9">Previous</button>
                <button class="next" data-next="quiz">Next</button>
            </div>
        </div>
        
        <!-- Quiz Section -->
        <div id="quiz" class="screen">
            <h2>Metals and Oxygen Quiz</h2>
            <p>Test your knowledge with this 10-question quiz about metals and oxygen reactions.</p>
            
            <div class="quiz-container">
                <div class="question" id="quiz-question-1">
                    <h3>Question 1</h3>
                    <p>What is formed when a metal reacts with oxygen?</p>
                    <div class="options">
                        <div class="option" data-value="A">A. Metal hydroxide</div>
                        <div class="option" data-value="B">B. Metal oxide</div>
                        <div class="option" data-value="C">C. Metal acid</div>
                        <div class="option" data-value="D">D. Metal chloride</div>
                    </div>
                </div>
                
                <div class="question" id="quiz-question-2" style="display: none;">
                    <h3>Question 2</h3>
                    <p>Which of these metals is MOST reactive with oxygen?</p>
                    <div class="options">
                        <div class="option" data-value="A">A. Gold</div>
                        <div class="option" data-value="B">B. Copper</div>
                        <div class="option" data-value="C">C. Iron</div>
                        <div class="option" data-value="D">D. Magnesium</div>
                    </div>
                </div>
                
                <div class="question" id="quiz-question-3" style="display: none;">
                    <h3>Question 3</h3>
                    <p>What happens when iron reacts with oxygen and water?</p>
                    <div class="options">
                        <div class="option" data-value="A">A. It forms a green patina</div>
                        <div class="option" data-value="B">B. It forms rust</div>
                        <div class="option" data-value="C">C. It remains unchanged</div>
                        <div class="option" data-value="D">D. It dissolves completely</div>
                    </div>
                </div>
                
                <div class="question" id="quiz-question-4" style="display: none;">
                    <h3>Question 4</h3>
                    <p>Why does magnesium burn with a bright white flame?</p>
                    <div class="options">
                        <div class="option" data-value="A">A. Because it's releasing heat energy during its reaction with oxygen</div>
                        <div class="option" data-value="B">B. Because it's changing color</div>
                        <div class="option" data-value="C">C. Because it's turning into a gas</div>
                        <div class="option" data-value="D">D. Because it's absorbing light from its surroundings</div>
                    </div>
                </div>
                
                <div class="question" id="quiz-question-5" style="display: none;">
                    <h3>Question 5</h3>
                    <p>Which word equation correctly shows the reaction between zinc and oxygen?</p>
                    <div class="options">
                        <div class="option" data-value="A">A. Zinc + Oxygen → Zinc Chloride</div>
                        <div class="option" data-value="B">B. Zinc → Zinc Oxide</div>
                        <div class="option" data-value="C">C. Zinc + Oxygen → Zinc Oxide</div>
                        <div class="option" data-value="D">D. Zinc + Oxygen → Zinc</div>
                    </div>
                </div>
                
                <div class="question" id="quiz-question-6" style="display: none;">
                    <h3>Question 6</h3>
                    <p>Why is gold valuable for jewelry?</p>
                    <div class="options">
                        <div class="option" data-value="A">A. Because it's the hardest metal</div>
                        <div class="option" data-value="B">B. Because it's the lightest metal</div>
                        <div class="option" data-value="C">C. Because it doesn't react with oxygen and stays shiny</div>
                        <div class="option" data-value="D">D. Because it's magnetic</div>
                    </div>
                </div>
                
                <div class="question" id="quiz-question-7" style="display: none;">
                    <h3>Question 7</h3>
                    <p>What is the process called when a substance combines with oxygen?</p>
                    <div class="options">
                        <div class="option" data-value="A">A. Reduction</div>
                        <div class="option" data-value="B">B. Oxidation</div>
                        <div class="option" data-value="C">C. Decomposition</div>
                        <div class="option" data-value="D">D. Neutralization</div>
                    </div>
                </div>
                
                <div class="question" id="quiz-question-8" style="display: none;">
                    <h3>Question 8</h3>
                    <p>What color is copper oxide?</p>
                    <div class="options">
                        <div class="option" data-value="A">A. Silver</div>
                        <div class="option" data-value="B">B. White</div>
                        <div class="option" data-value="C">C. Red-brown</div>
                        <div class="option" data-value="D">D. Black</div>
                    </div>
                </div>
                
                <div class="question" id="quiz-question-9" style="display: none;">
                    <h3>Question 9</h3>
                    <p>Why do we often paint or coat iron structures that will be used outdoors?</p>
                    <div class="options">
                        <div class="option" data-value="A">A. To make them look more attractive</div>
                        <div class="option" data-value="B">B. To prevent oxygen from reaching the metal and causing rust</div>
                        <div class="option" data-value="C">C. To make them heavier</div>
                        <div class="option" data-value="D">D. To make them magnetic</div>
                    </div>
                </div>
                
                <div class="question" id="quiz-question-10" style="display: none;">
                    <h3>Question 10</h3>
                    <p>What happens to a copper roof over many years?</p>
                    <div class="options">
                        <div class="option" data-value="A">A. It stays the same copper color</div>
                        <div class="option" data-value="B">B. It turns rusty brown like iron</div>
                        <div class="option" data-value="C">C. It develops a green patina</div>
                        <div class="option" data-value="D">D. It turns gold colored</div>
                    </div>
                </div>
                
                <div class="result" id="quiz-result" style="display: none;">
                    You scored <span id="score">0</span> out of 10!
                </div>
                
                <button id="next-question" class="check">Next Question</button>
                <button id="restart-quiz" style="display: none;">Restart Quiz</button>
            </div>
            
            <div class="navigation">
                <button class="prev" data-prev="task10">Previous</button>
                <button class="next disabled">Next</button>
            </div>
        </div>
        
        <div class="save-status" id="save-status">Progress saved!</div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize variables
            let currentScreen = 'welcome';
            const screens = ['welcome', 'key-concepts', 'task1', 'task2', 'task3', 'task4', 'task5', 'task6', 'task7', 'task8', 'task9', 'task10', 'quiz'];
            let progress = 0;
            let selectedTerm = null;
            let matchedPairs = [];
            let quizAnswers = {};
            let currentQuestion = 1;
            
            // Function to show a specific screen
            function showScreen(screenId) {
                document.querySelectorAll('.screen').forEach(screen => {
                    screen.classList.remove('active');
                });
                document.getElementById(screenId).classList.add('active');
                currentScreen = screenId;
                
                // Update progress bar
                const index = screens.indexOf(screenId);
                progress = (index / (screens.length - 1)) * 100;
                document.getElementById('progress').style.width = `${progress}%`;
                
                // Update active menu button
                document.querySelectorAll('.menu-button').forEach(button => {
                    button.classList.remove('active');
                    if (button.dataset.screen === screenId) {
                        button.classList.add('active');
                    }
                });
                
                // Save progress to local storage
                saveProgress();
            }
            
            // Navigation buttons
            document.querySelectorAll('.next').forEach(button => {
                button.addEventListener('click', function() {
                    if (!this.classList.contains('disabled') && this.dataset.next) {
                        showScreen(this.dataset.next);
                    }
                });
            });
            
            document.querySelectorAll('.prev').forEach(button => {
                button.addEventListener('click', function() {
                    if (!this.classList.contains('disabled') && this.dataset.prev) {
                        showScreen(this.dataset.prev);
                    }
                });
            });
            
            // Menu navigation
            document.querySelectorAll('.menu-button').forEach(button => {
                button.addEventListener('click', function() {
                    showScreen(this.dataset.screen);
                });
            });
            
            // Task 1: Match up game
            document.querySelectorAll('.term').forEach(term => {
                term.addEventListener('click', function() {
                    if (this.classList.contains('matched')) return;
                    
                    document.querySelectorAll('.term').forEach(t => t.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedTerm = this;
                });
            });
            
            document.querySelectorAll('.definition').forEach(definition => {
                definition.addEventListener('click', function() {
                    if (this.classList.contains('matched') || !selectedTerm) return;
                    
                    if (selectedTerm.dataset.id === this.dataset.id) {
                        // Match is correct
                        selectedTerm.classList.remove('selected');
                        selectedTerm.classList.add('matched');
                        this.classList.add('matched');
                        matchedPairs.push({termId: selectedTerm.dataset.id, defId: this.dataset.id});
                        selectedTerm = null;
                        
                        // Check if all pairs are matched
                        if (matchedPairs.length === 4) {
                            document.getElementById('task1-feedback').textContent = 'Great job! You matched all terms correctly.';
                            document.getElementById('task1-feedback').classList.add('success');
                            document.getElementById('task1-feedback').classList.remove('error');
                            document.getElementById('task1-feedback').style.display = 'block';
                        }
                    } else {
                        // Match is incorrect
                        document.getElementById('task1-feedback').textContent = 'That\'s not the correct match. Try again!';
                        document.getElementById('task1-feedback').classList.add('error');
                        document.getElementById('task1-feedback').classList.remove('success');
                        document.getElementById('task1-feedback').style.display = 'block';
                        selectedTerm.classList.remove('selected');
                        selectedTerm = null;
                    }
                });
            });
            
            // Task 1: Check answers button
            document.getElementById('check-task1').addEventListener('click', function() {
                if (matchedPairs.length === 4) {
                    document.getElementById('task1-feedback').textContent = 'Perfect! You matched all terms correctly.';
                    document.getElementById('task1-feedback').classList.add('success');
                    document.getElementById('task1-feedback').classList.remove('error');
                } else {
                    document.getElementById('task1-feedback').textContent = `You've matched ${matchedPairs.length} out of 4 terms correctly. Keep going!`;
                    document.getElementById('task1-feedback').classList.add('error');
                    document.getElementById('task1-feedback').classList.remove('success');
                }
                document.getElementById('task1-feedback').style.display = 'block';
            });
            
            // Task 2: Fill in the blanks
            document.querySelectorAll('.word').forEach(word => {
                word.addEventListener('click', function() {
                    if (this.classList.contains('used')) return;
                    
                    const wordValue = this.dataset.word;
                    const firstEmptyBlank = document.querySelector('.blank[value=""]');
                    
                    if (firstEmptyBlank) {
                        firstEmptyBlank.value = wordValue;
                        this.classList.add('used');
                    }
                });
            });
            
            // Task 2: Check answers button
            document.getElementById('check-task2').addEventListener('click', function() {
                const blanks = document.querySelectorAll('.blank');
                let correct = 0;
                
                blanks.forEach(blank => {
                    if (blank.value.trim().toLowerCase() === blank.dataset.answer.toLowerCase()) {
                        blank.style.borderColor = 'green';
                        correct++;
                    } else {
                        blank.style.borderColor = 'red';
                    }
                });
                
                if (correct === blanks.length) {
                    document.getElementById('task2-feedback').textContent = 'Excellent! All your answers are correct.';
                    document.getElementById('task2-feedback').classList.add('success');
                    document.getElementById('task2-feedback').classList.remove('error');
                } else {
                    document.getElementById('task2-feedback').textContent = `You got ${correct} out of ${blanks.length} correct. Try again!`;
                    document.getElementById('task2-feedback').classList.add('error');
                    document.getElementById('task2-feedback').classList.remove('success');
                }
                document.getElementById('task2-feedback').style.display = 'block';
            });
            
            // Task 3: Word Equations
            document.getElementById('check-task3').addEventListener('click', function() {
                const equationInputs = document.querySelectorAll('.equation-input');
                let correct = 0;
                
                equationInputs.forEach(input => {
                    const userAnswer = input.value.trim().toLowerCase();
                    const correctAnswer = input.dataset.answer.toLowerCase();
                    
                    if (userAnswer === correctAnswer) {
                        input.style.borderColor = 'green';
                        correct++;
                    } else {
                        input.style.borderColor = 'red';
                    }
                });
                
                if (correct === equationInputs.length) {
                    document.getElementById('task3-feedback').textContent = 'Perfect! All your equations are correct.';
                    document.getElementById('task3-feedback').classList.add('success');
                    document.getElementById('task3-feedback').classList.remove('error');
                } else {
                    document.getElementById('task3-feedback').textContent = `You got ${correct} out of ${equationInputs.length} correct. Remember that the pattern is Metal + Oxygen → Metal Oxide.`;
                    document.getElementById('task3-feedback').classList.add('error');
                    document.getElementById('task3-feedback').classList.remove('success');
                }
                document.getElementById('task3-feedback').style.display = 'block';
            });
            
            // Task 4: Ordering Reactivity (Drag and Drop)
            const draggables = document.querySelectorAll('.drag-item');
            const containers = document.querySelectorAll('.drag-container');
            
            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', () => {
                    draggable.classList.add('dragging');
                });
                
                draggable.addEventListener('dragend', () => {
                    draggable.classList.remove('dragging');
                });
            });
            
            containers.forEach(container => {
                container.addEventListener('dragover', e => {
                    e.preventDefault();
                    const afterElement = getDragAfterElement(container, e.clientY);
                    const draggable = document.querySelector('.dragging');
                    if (afterElement == null) {
                        container.appendChild(draggable);
                    } else {
                        container.insertBefore(draggable, afterElement);
                    }
                });
            });
            
            function getDragAfterElement(container, y) {
                const draggableElements = [...container.querySelectorAll('.drag-item:not(.dragging)')];
                
                return draggableElements.reduce((closest, child) => {
                    const box = child.getBoundingClientRect();
                    const offset = y - box.top - box.height / 2;
                    if (offset < 0 && offset > closest.offset) {
                        return { offset: offset, element: child };
                    } else {
                        return closest;
                    }
                }, { offset: Number.NEGATIVE_INFINITY }).element;
            }
            
            // Task 4: Check reactivity order
            document.getElementById('check-task4').addEventListener('click', function() {
                const orderedMetals = Array.from(document.querySelectorAll('#metals-order .drag-item')).map(item => item.dataset.metal);
                const correctOrder = ['Magnesium', 'Zinc', 'Iron', 'Copper', 'Gold'];
                
                // Check if all metals have been placed in order
                if (orderedMetals.length < 5) {
                    document.getElementById('task4-feedback').textContent = 'Please drag all metals into the order container before checking.';
                    document.getElementById('task4-feedback').classList.add('error');
                    document.getElementById('task4-feedback').classList.remove('success');
                    document.getElementById('task4-feedback').style.display = 'block';
                    return;
                }
                
                // Check if the order is correct
                let isCorrect = true;
                for (let i = 0; i < correctOrder.length; i++) {
                    if (orderedMetals[i] !== correctOrder[i]) {
                        isCorrect = false;
                        break;
                    }
                }
                
                if (isCorrect) {
                    document.getElementById('task4-feedback').textContent = 'Perfect! You have the correct order of reactivity.';
                    document.getElementById('task4-feedback').classList.add('success');
                    document.getElementById('task4-feedback').classList.remove('error');
                } else {
                    document.getElementById('task4-feedback').textContent = 'That\'s not quite right. Try again!';
                    document.getElementById('task4-feedback').classList.add('error');
                    document.getElementById('task4-feedback').classList.remove('success');
                    document.getElementById('task4-correct').style.display = 'block';
                }
                document.getElementById('task4-feedback').style.display = 'block';
            });
            
            // Task 5: Check answers
            document.getElementById('check-task5').addEventListener('click', function() {
                const correctAnswers = {
                    q1: 'false',
                    q2: 'true',
                    q3: 'true',
                    q4: 'true',
                    q5: 'false'
                };
                
                let correct = 0;
                let allAnswered = true;
                
                for (const question in correctAnswers) {
                    const selectedOption = document.querySelector(`input[name="${question}"]:checked`);
                    
                    if (!selectedOption) {
                        allAnswered = false;
                        continue;
                    }
                    
                    const isCorrect = selectedOption.value === correctAnswers[question];
                    
                    if (isCorrect) {
                        correct++;
                    }
                    
                    // Show correct answers
                    document.querySelectorAll(`.question-item:has(input[name="${question}"])`).forEach(questionDiv => {
                        const correctAnswer = questionDiv.querySelector('.correct-answer');
                        correctAnswer.style.display = 'block';
                    });
                }
                
                if (!allAnswered) {
                    document.getElementById('task5-feedback').textContent = 'Please answer all questions before checking.';
                    document.getElementById('task5-feedback').classList.add('error');
                    document.getElementById('task5-feedback').classList.remove('success');
                } else {
                    document.getElementById('task5-feedback').textContent = `You got ${correct} out of 5 correct!`;
                    if (correct === 5) {
                        document.getElementById('task5-feedback').classList.add('success');
                        document.getElementById('task5-feedback').classList.remove('error');
                    } else {
                        document.getElementById('task5-feedback').classList.add('error');
                        document.getElementById('task5-feedback').classList.remove('success');
                    }
                }
                document.getElementById('task5-feedback').style.display = 'block';
            });
            
            // Show sample answers for Task 6
            document.getElementById('show-sample-answers').addEventListener('click', function() {
                const sampleAnswers = document.querySelector('.sample-answers');
                if (sampleAnswers.style.display === 'none') {
                    sampleAnswers.style.display = 'block';
                    this.textContent = 'Hide Sample Answers';
                } else {
                    sampleAnswers.style.display = 'none';
                    this.textContent = 'Show Sample Answers';
                }
            });
            
            // Show sample answers for Task 7
            document.getElementById('show-sample-answers-7').addEventListener('click', function() {
                const sampleAnswers = document.querySelector('.sample-answers-7');
                if (sampleAnswers.style.display === 'none') {
                    sampleAnswers.style.display = 'block';
                    this.textContent = 'Hide Sample Answers';
                } else {
                    sampleAnswers.style.display = 'none';
                    this.textContent = 'Show Sample Answers';
                }
            });
            
            // Show sample answers for Task 8
            document.getElementById('show-sample-answers-8').addEventListener('click', function() {
                const sampleAnswers = document.querySelector('.sample-answers-8');
                if (sampleAnswers.style.display === 'none') {
                    sampleAnswers.style.display = 'block';
                    this.textContent = 'Hide Sample Answers';
                } else {
                    sampleAnswers.style.display = 'none';
                    this.textContent = 'Show Sample Answers';
                }
            });
            
            // Show sample experiment for Task 9
            document.getElementById('show-sample-experiment').addEventListener('click', function() {
                const sampleExperiment = document.querySelector('.sample-experiment');
                if (sampleExperiment.style.display === 'none') {
                    sampleExperiment.style.display = 'block';
                    this.textContent = 'Hide Sample Experiment';
                } else {
                    sampleExperiment.style.display = 'none';
                    this.textContent = 'Show Sample Experiment';
                }
            });
            
            // Quiz functionality
            const quizQuestions = [
                {question: 1, answer: 'B'},
                {question: 2, answer: 'D'},
                {question: 3, answer: 'B'},
                {question: 4, answer: 'A'},
                {question: 5, answer: 'C'},
                {question: 6, answer: 'C'},
                {question: 7, answer: 'B'},
                {question: 8, answer: 'D'},
                {question: 9, answer: 'B'},
                {question: 10, answer: 'C'}
            ];
            
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const questionContainer = this.closest('.question');
                    const questionId = questionContainer.id.split('-')[2];
                    
                    // Deselect all options in this question
                    questionContainer.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Select this option
                    this.classList.add('selected');
                    
                    // Save the answer
                    quizAnswers[questionId] = this.dataset.value;
                });
            });
            
            document.getElementById('next-question').addEventListener('click', function() {
                const currentQuestionElement = document.getElementById(`quiz-question-${currentQuestion}`);
                const selectedOption = currentQuestionElement.querySelector('.option.selected');
                
                if (!selectedOption) {
                    alert('Please select an answer before proceeding.');
                    return;
                }
                
                // Check if the answer is correct
                const correctAnswer = quizQuestions.find(q => q.question == currentQuestion).answer;
                if (selectedOption.dataset.value === correctAnswer) {
                    selectedOption.classList.add('correct');
                } else {
                    selectedOption.classList.add('incorrect');
                    currentQuestionElement.querySelector(`.option[data-value="${correctAnswer}"]`).classList.add('correct');
                }
                
                // Disable clicking on options
                currentQuestionElement.querySelectorAll('.option').forEach(opt => {
                    opt.style.pointerEvents = 'none';
                });
                
                // Move to next question or show results
                setTimeout(() => {
                    currentQuestionElement.style.display = 'none';
                    
                    if (currentQuestion < 10) {
                        currentQuestion++;
                        document.getElementById(`quiz-question-${currentQuestion}`).style.display = 'block';
                    } else {
                        // Show final results
                        const score = Object.keys(quizAnswers).filter(q => {
                            const questionObj = quizQuestions.find(qObj => qObj.question == q);
                            return quizAnswers[q] === questionObj.answer;
                        }).length;
                        
                        document.getElementById('score').textContent = score;
                        document.getElementById('quiz-result').style.display = 'block';
                        this.style.display = 'none';
                        document.getElementById('restart-quiz').style.display = 'block';
                    }
                }, 1500);
            });
            
            document.getElementById('restart-quiz').addEventListener('click', function() {
                // Reset quiz state
                currentQuestion = 1;
                quizAnswers = {};
                
                // Reset question displays
                document.querySelectorAll('.question').forEach((q, index) => {
                    q.style.display = index === 0 ? 'block' : 'none';
                    
                    // Reset options
                    q.querySelectorAll('.option').forEach(opt => {
                        opt.classList.remove('selected', 'correct', 'incorrect');
                        opt.style.pointerEvents = 'auto';
                    });
                });
                
                // Hide result and show next button
                document.getElementById('quiz-result').style.display = 'none';
                document.getElementById('next-question').style.display = 'block';
                this.style.display = 'none';
            });
            
            // Add event listeners for radio buttons in Task 5
            document.querySelectorAll('input[type="radio"]').forEach(radio => {
                radio.addEventListener('change', function() {
                    const correctionContainer = this.closest('.question-item').querySelector('.correction-container');
                    
                    if (this.value === 'false') {
                        correctionContainer.style.display = 'block';
                    } else {
                        correctionContainer.style.display = 'none';
                    }
                    
                    saveProgress();
                });
            });
            
            // Add auto-save to drag and drop events
            draggables.forEach(draggable => {
                draggable.addEventListener('dragend', saveProgress);
            });
            
            // Local storage functions
            function saveProgress() {
                const data = {
                    currentScreen: currentScreen,
                    progress: progress,
                    matchedPairs: matchedPairs,
                    // Add more data as needed for each task
                    task2Answers: Array.from(document.querySelectorAll('.blank')).map(blank => blank.value),
                    task3Answers: Array.from(document.querySelectorAll('.equation-input')).map(input => input.value),
                    task4Order: Array.from(document.querySelectorAll('#metals-order .drag-item')).map(item => item.dataset.metal),
                    task6Answers: {
                        beforeBurning: document.getElementById('before-burning').value,
                        duringReaction: document.getElementById('during-reaction').value,
                        afterReaction: document.getElementById('after-reaction').value,
                        wordEquation: document.getElementById('word-equation').value
                    },
                    task7Answers: {
                        goldPrediction: document.getElementById('gold-prediction').value,
                        goldExplanation: document.getElementById('gold-explanation').value,
                        ironPrediction: document.getElementById('iron-prediction').value,
                        ironExplanation: document.getElementById('iron-explanation').value,
                        copperPrediction: document.getElementById('copper-prediction').value,
                        copperExplanation: document.getElementById('copper-explanation').value
                    },
                    task8Answers: {
                        bicycleAnswer: document.getElementById('bicycle-answer').value,
                        goldAnswer: document.getElementById('gold-answer').value,
                        ironAnswer: document.getElementById('iron-answer').value
                    },
                    task9Answers: {
                        materials: document.getElementById('experiment-materials').value,
                        steps: document.getElementById('experiment-steps').value,
                        observations: document.getElementById('experiment-observations').value,
                        recording: document.getElementById('experiment-recording').value,
                        safety: document.getElementById('experiment-safety').value
                    },
                    task10Answers: {
                        metalsToUse: document.getElementById('metals-to-use').value,
                        metalsToAvoid: document.getElementById('metals-to-avoid').value,
                        protectionMeasures: document.getElementById('protection-measures').value,
                        creativeParagraph: document.getElementById('creative-paragraph').value
                    },
                    quizAnswers: quizAnswers,
                    currentQuestion: currentQuestion
                };
                
                localStorage.setItem('chemistryProgress', JSON.stringify(data));
                
                // Show save notification
                const saveStatus = document.getElementById('save-status');
                saveStatus.classList.add('show');
                setTimeout(() => {
                    saveStatus.classList.remove('show');
                }, 2000);
            }
            
            function loadProgress() {
                const savedData = localStorage.getItem('chemistryProgress');
                if (!savedData) return;
                
                const data = JSON.parse(savedData);
                
                // Restore current screen
                showScreen(data.currentScreen);
                
                // Restore matched pairs in Task 1
                if (data.matchedPairs && data.matchedPairs.length > 0) {
                    matchedPairs = data.matchedPairs;
                    matchedPairs.forEach(pair => {
                        const term = document.querySelector(`.term[data-id="${pair.termId}"]`);
                        const definition = document.querySelector(`.definition[data-id="${pair.defId}"]`);
                        
                        if (term && definition) {
                            term.classList.add('matched');
                            definition.classList.add('matched');
                        }
                    });
                }
                
                // Restore Task 2 answers
                if (data.task2Answers) {
                    document.querySelectorAll('.blank').forEach((blank, index) => {
                        if (data.task2Answers[index]) {
                            blank.value = data.task2Answers[index];
                            
                            // Mark word as used
                            const word = document.querySelector(`.word[data-word="${data.task2Answers[index]}"]`);
                            if (word) {
                                word.classList.add('used');
                            }
                        }
                    });
                }
                
                // Restore Task 3 answers
                if (data.task3Answers) {
                    document.querySelectorAll('.equation-input').forEach((input, index) => {
                        if (data.task3Answers[index]) {
                            input.value = data.task3Answers[index];
                        }
                    });
                }
                
                // Restore Task 4 order
                if (data.task4Order && data.task4Order.length > 0) {
                    const container = document.getElementById('metals-order');
                    data.task4Order.forEach(metal => {
                        const item = document.querySelector(`.drag-item[data-metal="${metal}"]`);
                        if (item) {
                            container.appendChild(item);
                        }
                    });
                }
                
                // Restore Task 6 answers
                if (data.task6Answers) {
                    document.getElementById('before-burning').value = data.task6Answers.beforeBurning || '';
                    document.getElementById('during-reaction').value = data.task6Answers.duringReaction || '';
                    document.getElementById('after-reaction').value = data.task6Answers.afterReaction || '';
                    document.getElementById('word-equation').value = data.task6Answers.wordEquation || '';
                }
                
                // Restore Task 7 answers
                if (data.task7Answers) {
                    document.getElementById('gold-prediction').value = data.task7Answers.goldPrediction || '';
                    document.getElementById('gold-explanation').value = data.task7Answers.goldExplanation || '';
                    document.getElementById('iron-prediction').value = data.task7Answers.ironPrediction || '';
                    document.getElementById('iron-explanation').value = data.task7Answers.ironExplanation || '';
                    document.getElementById('copper-prediction').value = data.task7Answers.copperPrediction || '';
                    document.getElementById('copper-explanation').value = data.task7Answers.copperExplanation || '';
                }
                
                // Restore Task 8 answers
                if (data.task8Answers) {
                    document.getElementById('bicycle-answer').value = data.task8Answers.bicycleAnswer || '';
                    document.getElementById('gold-answer').value = data.task8Answers.goldAnswer || '';
                    document.getElementById('iron-answer').value = data.task8Answers.ironAnswer || '';
                }
                
                // Restore Task 9 answers
                if (data.task9Answers) {
                    document.getElementById('experiment-materials').value = data.task9Answers.materials || '';
                    document.getElementById('experiment-steps').value = data.task9Answers.steps || '';
                    document.getElementById('experiment-observations').value = data.task9Answers.observations || '';
                    document.getElementById('experiment-recording').value = data.task9Answers.recording || '';
                    document.getElementById('experiment-safety').value = data.task9Answers.safety || '';
                }
                
                // Restore Task 10 answers
                if (data.task10Answers) {
                    document.getElementById('metals-to-use').value = data.task10Answers.metalsToUse || '';
                    document.getElementById('metals-to-avoid').value = data.task10Answers.metalsToAvoid || '';
                    document.getElementById('protection-measures').value = data.task10Answers.protectionMeasures || '';
                    document.getElementById('creative-paragraph').value = data.task10Answers.creativeParagraph || '';
                }
                
                // Restore quiz answers
                if (data.quizAnswers) {
                    quizAnswers = data.quizAnswers;
                    currentQuestion = data.currentQuestion || 1;
                    
                    // Update quiz display based on saved state
                    document.querySelectorAll('.question').forEach((q, index) => {
                        q.style.display = (index + 1) === currentQuestion ? 'block' : 'none';
                    });
                    
                    // Mark selected options
                    for (const qNum in quizAnswers) {
                        const questionDiv = document.getElementById(`quiz-question-${qNum}`);
                        if (questionDiv) {
                            const option = questionDiv.querySelector(`.option[data-value="${quizAnswers[qNum]}"]`);
                            if (option) {
                                option.classList.add('selected');
                            }
                        }
                    }
                    
                    // Show results if quiz was completed
                    if (currentQuestion > 10) {
                        const score = Object.keys(quizAnswers).filter(q => {
                            const questionObj = quizQuestions.find(qObj => qObj.question == q);
                            return quizAnswers[q] === questionObj.answer;
                        }).length;
                        
                        document.getElementById('score').textContent = score;
                        document.getElementById('quiz-result').style.display = 'block';
                        document.getElementById('next-question').style.display = 'none';
                        document.getElementById('restart-quiz').style.display = 'block';
                    }
                }
            }
            
            // Set up auto-save on input changes
            const inputElements = document.querySelectorAll('input, textarea');
            inputElements.forEach(input => {
                input.addEventListener('change', saveProgress);
            });
            
            // Load saved progress
            loadProgress();
            
            // Regular saving interval (every 30 seconds)
            setInterval(saveProgress, 30000);
        });
    </script>
</body>
</html>
