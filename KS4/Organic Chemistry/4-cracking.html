<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cracking Hydrocarbons - GCSE Chemistry</title>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #2ecc71;
            --warning: #f39c12;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--dark);
            line-height: 1.6;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 1rem 0;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        nav {
            display: flex;
            justify-content: center;
            margin-top: 1rem;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 10px;
            border-radius: 30px;
        }
        
        nav a {
            color: white;
            text-decoration: none;
            padding: 8px 20px;
            margin: 0 5px;
            border-radius: 20px;
            transition: background-color 0.3s;
        }
        
        nav a:hover {
            background-color: rgba(255, 255, 255, 0.2);
        }
        
        nav a.active {
            background-color: white;
            color: var(--primary);
        }
        
        section {
            padding: 40px 0;
            display: none;
        }
        
        section.active {
            display: block;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
        }
        
        h2 {
            font-size: 2rem;
            margin-bottom: 1.5rem;
            color: var(--primary);
            position: relative;
        }
        
        h2::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 0;
            width: 60px;
            height: 4px;
            background-color: var(--accent);
        }
        
        h3 {
            font-size: 1.5rem;
            margin: 1.5rem 0 1rem;
            color: var(--secondary);
        }
        
        p {
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }
        
        .card {
            background-color: white;
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .info-box {
            background-color: rgba(52, 152, 219, 0.1);
            border-left: 4px solid var(--secondary);
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 5px;
        }
        
        .button {
            display: inline-block;
            background-color: var(--secondary);
            color: white;
            padding: 10px 20px;
            border-radius: 30px;
            text-decoration: none;
            margin: 10px 0;
            transition: background-color 0.3s;
            cursor: pointer;
            border: none;
            font-size: 1rem;
        }
        
        .button:hover {
            background-color: #2980b9;
        }
        
        .button.primary {
            background-color: var(--accent);
        }
        
        .button.primary:hover {
            background-color: #c0392b;
        }
        
        .flex-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
        }
        
        .flex-item {
            flex: 1;
            min-width: 300px;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        table, th, td {
            border: 1px solid #ddd;
        }
        
        th, td {
            padding: 12px;
            text-align: left;
        }
        
        th {
            background-color: var(--secondary);
            color: white;
        }
        
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        
        .question-container {
            margin-bottom: 30px;
        }
        
        .options-container {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 10px;
        }
        
        .option {
            padding: 10px;
            border: 2px solid #ddd;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        .option:hover {
            background-color: #f5f5f5;
        }
        
        .option.selected {
            border-color: var(--secondary);
            background-color: rgba(52, 152, 219, 0.1);
        }
        
        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
            display: none;
        }
        
        .feedback.correct {
            background-color: rgba(46, 204, 113, 0.1);
            border: 1px solid var(--success);
            color: var(--success);
        }
        
        .feedback.incorrect {
            background-color: rgba(231, 76, 60, 0.1);
            border: 1px solid var(--accent);
            color: var(--accent);
        }
        
        .animation-container {
            width: 100%;
            min-height: 300px;
            margin: 20px 0;
            position: relative;
            background-color: #f9f9f9;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .molecule {
            position: absolute;
            transition: transform 0.3s, opacity 0.3s;
        }
        
        /* Atom and bond styling for display formula */
        .atom {
            transition: all 0.5s ease-in-out;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            z-index: 2;
            border: 1px solid #000;
        }
        
        .carbon-atom {
            background-color: #fff;
            color: #000;
        }
        
        .hydrogen-atom {
            background-color: #fff;
            color: #000;
            border: 1px solid #aaa;
        }
        
        .single-bond {
            background-color: #000;
            z-index: 1;
            transition: all 0.5s ease-in-out;
        }
        
        .double-bond {
            z-index: 1;
            transition: all 0.5s ease-in-out;
        }
        
        .double-bond-line {
            background-color: #000;
            position: absolute;
            height: 2px;
            width: 100%;
        }
        
        /* Test tube styling */
        .test-tube {
            width: 80px;
            height: 200px;
            background-color: transparent;
            border: 3px solid rgba(200, 200, 200, 0.5);
            border-radius: 0 0 20px 20px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
            box-shadow: 
                inset 5px 0 15px rgba(255, 255, 255, 0.4),
                inset -5px 0 15px rgba(0, 0, 0, 0.1);
        }
        
        .test-tube::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, 
                rgba(255, 255, 255, 0.3) 0%, 
                rgba(255, 255, 255, 0) 20%, 
                rgba(255, 255, 255, 0) 80%, 
                rgba(255, 255, 255, 0.3) 100%);
            pointer-events: none;
        }
        
        .test-tube-liquid {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 80%;
            background-color: rgba(178, 81, 0, 0.8);  /* Bromine water color */
            transition: background-color 2s;
            border-radius: 0 0 17px 17px;
            background-image: 
                linear-gradient(0deg, 
                    rgba(255, 255, 255, 0.2) 0%, 
                    rgba(255, 255, 255, 0) 50%, 
                    rgba(255, 255, 255, 0.1) 100%);
        }
        
        .test-tube-meniscus {
            position: absolute;
            width: 100%;
            height: 8px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            bottom: 80%;
            left: 0;
            transform: translateY(4px);
            z-index: 2;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        /* Background paper effect */
        .paper-bg {
            background-color: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 5px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }
        
        /* For the balancing game */
        .equation-container {
            display: flex;
            align-items: center;
            justify-content: center;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px 0;
            font-size: 1.2rem;
        }
        
        .subscript-input {
            width: 40px;
            height: 30px;
            text-align: center;
            font-size: 1rem;
            border: 2px solid #ddd;
            border-radius: 5px;
        }
        
        .formula-equation {
            font-size: 1.3rem;
            margin: 15px 0;
        }
        
        .hint {
            background-color: #f8f9fa;
            border-left: 4px solid #f39c12;
            padding: 10px;
            margin: 10px 0;
            font-size: 0.95rem;
        }
        
        .button.small {
            padding: 5px 10px;
            font-size: 0.9rem;
            margin: 5px 0;
        }
        
        /* For the drag and drop game */
        .drag-drop-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin: 20px 0;
        }
        
        .draggable-items {
            flex: 1;
            min-width: 300px;
            padding: 15px;
            background-color: #f5f5f5;
            border-radius: 10px;
        }
        
        .drop-targets {
            flex: 1;
            min-width: 300px;
        }
        
        .draggable {
            padding: 10px;
            margin: 10px 0;
            background-color: white;
            border: 2px solid #ddd;
            border-radius: 5px;
            cursor: grab;
            transition: background-color 0.3s;
        }
        
        .draggable:hover {
            background-color: #f9f9f9;
        }
        
        .drop-target {
            padding: 15px;
            margin: 10px 0;
            background-color: #f5f5f5;
            border: 2px dashed #ddd;
            border-radius: 5px;
            min-height: 50px;
        }
        
        .drop-target.highlight {
            border-color: var(--secondary);
            background-color: rgba(52, 152, 219, 0.1);
        }
        
        .progress-bar-container {
            width: 100%;
            height: 20px;
            background-color: #f5f5f5;
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .progress-bar {
            height: 100%;
            width: 0;
            background-color: var(--success);
            transition: width 0.3s;
        }
        
        footer {
            background-color: var(--primary);
            color: white;
            text-align: center;
            padding: 20px 0;
            margin-top: 40px;
        }
        
        .tab-container {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #ddd;
        }
        
        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: border-color 0.3s;
        }
        
        .tab:hover {
            border-color: #ddd;
        }
        
        .tab.active {
            border-color: var(--secondary);
            color: var(--secondary);
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Bromine water test animation */
        .test-tube {
            width: 80px;
            height: 200px;
            background-color: rgba(255, 255, 255, 0.8);
            border: 3px solid #ddd;
            border-radius: 0 0 20px 20px;
            margin: 0 auto;
            position: relative;
            overflow: hidden;
        }
        
        .test-tube-liquid {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 80%;
            background-color: #b25100;  /* Bromine water color */
            transition: background-color 2s;
        }
        
        /* Simulation controls */
        .simulation-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        
        /* Game styles */
        .game-container {
            background-color: white;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .score-display {
            font-size: 1.2rem;
            font-weight: bold;
            margin: 10px 0;
            text-align: center;
        }
        
        /* Modal styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal-content {
            background-color: white;
            border-radius: 10px;
            padding: 30px;
            max-width: 600px;
            width: 90%;
            text-align: center;
            position: relative;
        }
        
        .modal-close {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            cursor: pointer;
        }
        
        /* Responsive design adjustments */
        @media (max-width: 768px) {
            .options-container {
                grid-template-columns: 1fr;
            }
            
            nav {
                flex-direction: column;
                gap: 10px;
            }
            
            .flex-container {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="container">
            <h1>Cracking Hydrocarbons</h1>
            <p>Interactive GCSE Chemistry Lesson</p>
            <nav>
                <a href="#" class="nav-link active" data-section="tutorial-section">Tutorial</a>
                <a href="#" class="nav-link" data-section="practice-section">Practice</a>
                <a href="#" class="nav-link" data-section="game-section">Games</a>
            </nav>
        </div>
    </header>
    
    <!-- Tutorial Section -->
    <section id="tutorial-section" class="active">
        <div class="container">
            <h2>Learning About Cracking Hydrocarbons</h2>
            
            <div class="card">
                <h3>What are Hydrocarbons?</h3>
                <p>Hydrocarbons are compounds that contain only hydrogen and carbon atoms. They are the main components of crude oil and natural gas.</p>
                <p>The two main types of hydrocarbons we'll focus on are:</p>
                <ul>
                    <li><strong>Alkanes</strong> - saturated hydrocarbons with single bonds</li>
                    <li><strong>Alkenes</strong> - unsaturated hydrocarbons with at least one carbon-carbon double bond</li>
                </ul>
            </div>
            
            <div class="tab-container">
                <div class="tab active" data-tab="what-is-cracking">What is Cracking?</div>
                <div class="tab" data-tab="cracking-methods">Cracking Methods</div>
                <div class="tab" data-tab="products">Products of Cracking</div>
                <div class="tab" data-tab="alkene-properties">Alkene Properties</div>
                <div class="tab" data-tab="uses">Uses of Products</div>
            </div>
            
            <div class="tab-content active" id="what-is-cracking">
                <div class="card">
                    <h3>What is Cracking?</h3>
                    <p>Cracking is a process used to break down larger hydrocarbon molecules into smaller, more useful ones.</p>
                    <div class="info-box">
                        <p><strong>Key Point:</strong> Hydrocarbons can be broken down (cracked) to produce smaller, more useful molecules.</p>
                    </div>
                    <p>When crude oil is distilled, it produces different fractions including:</p>
                    <ul>
                        <li>Gases (small molecules)</li>
                        <li>Petrol and naphtha (medium-sized molecules)</li>
                        <li>Kerosene and diesel (larger molecules)</li>
                        <li>Fuel oil and bitumen (very large molecules)</li>
                    </ul>
                    <p>There is higher demand for the smaller molecules (like those in petrol) than for the larger ones, so cracking helps convert the less useful larger hydrocarbons into more valuable smaller ones.</p>
                    
                    <div class="animation-container" id="cracking-animation">
                        <!-- Animation will be added here via JavaScript -->
                    </div>
                    
                    <div class="simulation-controls">
                        <button class="button" id="start-cracking-animation">Start Animation</button>
                        <button class="button" id="reset-cracking-animation">Reset</button>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="cracking-methods">
                <div class="card">
                    <h3>Methods of Cracking</h3>
                    <p>There are two main methods used for cracking hydrocarbons:</p>
                    
                    <div class="flex-container">
                        <div class="flex-item card">
                            <h3>Catalytic Cracking</h3>
                            <p>Uses a catalyst to help the reaction occur at lower temperatures.</p>
                            <ul>
                                <li><strong>Temperature:</strong> 450-500°C</li>
                                <li><strong>Pressure:</strong> Slightly above atmospheric pressure</li>
                                <li><strong>Catalyst:</strong> Zeolites (aluminosilicates)</li>
                                <li><strong>Benefits:</strong> Lower energy requirements, greater control over products</li>
                            </ul>
                        </div>
                        
                        <div class="flex-item card">
                            <h3>Steam Cracking</h3>
                            <p>Uses high-temperature steam without a catalyst.</p>
                            <ul>
                                <li><strong>Temperature:</strong> 800-900°C</li>
                                <li><strong>Pressure:</strong> Low pressure</li>
                                <li><strong>Steam:</strong> Mixed with the hydrocarbon feedstock</li>
                                <li><strong>Benefits:</strong> Produces higher yields of alkenes (like ethene)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="info-box">
                        <p><strong>Key Point:</strong> Cracking can be done by various methods including catalytic cracking and steam cracking.</p>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="products">
                <div class="card">
                    <h3>Products of Cracking</h3>
                    <p>When large hydrocarbon molecules are cracked, they form:</p>
                    <ul>
                        <li><strong>Alkanes</strong> - smaller saturated hydrocarbons</li>
                        <li><strong>Alkenes</strong> - unsaturated hydrocarbons with carbon-carbon double bonds</li>
                    </ul>
                    
                    <div class="info-box">
                        <p><strong>Key Point:</strong> The products of cracking include alkanes and another type of hydrocarbon called alkenes.</p>
                    </div>
                    
                    <p>For example, when decane (C₁₀H₂₂) is cracked, it might produce:</p>
                    <div class="equation-display">
                        C₁₀H₂₂ → C₄H₁₀ + C₆H₁₂
                    </div>
                    <p>Where C₄H₁₀ is butane (an alkane) and C₆H₁₂ is hexene (an alkene).</p>
                    
                    <div class="info-box">
                        <p><strong>Important:</strong> In cracking reactions, at least one of the products will be an alkene.</p>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="alkene-properties">
                <div class="card">
                    <h3>Properties of Alkenes</h3>
                    <p>Alkenes are more reactive than alkanes due to their carbon-carbon double bond.</p>
                    
                    <div class="info-box">
                        <p><strong>Key Point:</strong> Alkenes are more reactive than alkanes and react with bromine water, which is used as a test for alkenes.</p>
                    </div>
                    
                    <h4>Bromine Water Test</h4>
                    <p>Bromine water is an orange-brown solution containing bromine. When an alkene is added to bromine water:</p>
                    <ul>
                        <li>The orange-brown color of the bromine water disappears (becomes colorless)</li>
                        <li>This happens because the bromine molecules add across the carbon-carbon double bond</li>
                    </ul>
                    
                    <div class="info-box">
                        <p><strong>Key Point:</strong> When bromine water reacts with an alkene, it changes from orange-brown to colorless.</p>
                    </div>
                    
                    <div class="flex-container">
                        <div class="flex-item">
                            <h4>Bromine Water Test Animation</h4>
                            <div class="test-tube" id="bromine-test-tube">
                                <div class="test-tube-liquid" id="bromine-liquid"></div>
                            </div>
                        </div>
                        <div class="flex-item">
                            <div id="bromine-reaction-info">
                                <p><strong>Bromine water test for alkenes:</strong></p>
                                <p>Bromine water is orange-brown in color.</p>
                                <p>When an alkene is added, the bromine will react with the carbon-carbon double bond.</p>
                                <p>Click "Add Alkene" to see the reaction.</p>
                            </div>
                            <button class="button" id="add-alkene-btn">Add Alkene</button>
                            <button class="button" id="reset-test-btn">Reset Test</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="tab-content" id="uses">
                <div class="card">
                    <h3>Uses of Cracking Products</h3>
                    
                    <div class="info-box">
                        <p><strong>Key Point:</strong> There is a high demand for fuels with small molecules and so some of the products of cracking are useful as fuels.</p>
                    </div>
                    
                    <div class="flex-container">
                        <div class="flex-item card">
                            <h3>Uses of Alkanes</h3>
                            <ul>
                                <li>Fuels for vehicles (petrol, diesel)</li>
                                <li>Domestic heating and cooking (natural gas, LPG)</li>
                                <li>Electricity generation</li>
                                <li>Lubricants (larger alkanes)</li>
                            </ul>
                        </div>
                        
                        <div class="flex-item card">
                            <h3>Uses of Alkenes</h3>
                            <ul>
                                <li>Production of polymers (plastics)</li>
                                <li>Manufacturing of chemicals like alcohols and detergents</li>
                                <li>Production of antifreeze (ethylene glycol)</li>
                                <li>Manufacturing of PVC (from vinyl chloride)</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="info-box">
                        <p><strong>Key Point:</strong> Alkenes are used to produce polymers and as starting materials for the production of many other chemicals.</p>
                    </div>
                    
                    <h3>How Modern Life Depends on Hydrocarbons</h3>
                    <p>Almost every aspect of modern life involves products derived from hydrocarbons:</p>
                    <ul>
                        <li><strong>Transportation:</strong> Cars, planes, and ships use fuels derived from hydrocarbons</li>
                        <li><strong>Energy:</strong> Heating homes, generating electricity</li>
                        <li><strong>Materials:</strong> Plastics, synthetic fibers, and countless everyday items</li>
                        <li><strong>Healthcare:</strong> Many medicines and medical equipment contain hydrocarbon-derived materials</li>
                        <li><strong>Agriculture:</strong> Fertilizers, pesticides, and farm equipment rely on hydrocarbon products</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Practice Section -->
    <section id="practice-section">
        <div class="container">
            <h2>Test Your Knowledge</h2>
            
            <div class="card">
                <h3>Multiple Choice Questions</h3>
                
                <div id="questions-container">
                    <!-- Questions will be added here via JavaScript -->
                </div>
                
                <div class="progress-bar-container">
                    <div class="progress-bar" id="questions-progress"></div>
                </div>
                
                <button class="button primary" id="check-answers-btn">Check Answers</button>
                <button class="button" id="reset-quiz-btn">Reset Quiz</button>
            </div>
            
            <div class="card">
                <h3>Complete the Hydrocarbon Formulas</h3>
                <p>In a cracking reaction, a larger hydrocarbon breaks down into a smaller alkane and an alkene. For each equation below, fill in the missing subscripts to complete the hydrocarbon formula:</p>
                
                <div id="equations-container">
                    <!-- Equation exercises will be added here via JavaScript -->
                </div>
                
                <button class="button primary" id="check-equations-btn">Check Equations</button>
                <button class="button" id="reset-equations-btn">Reset</button>
            </div>
        </div>
    </section>
    
    <!-- Game Section -->
    <section id="game-section">
        <div class="container">
            <h2>Fun Learning Games</h2>
            
            <div class="game-container">
                <h3>Hydrocarbon Sorting Game</h3>
                <p>Drag each product to the correct category based on its use:</p>
                
                <div class="score-display" id="sorting-score">Score: 0</div>
                
                <div class="drag-drop-container">
                    <div class="draggable-items" id="draggable-items">
                        <!-- Draggable items will be added here via JavaScript -->
                    </div>
                    
                    <div class="drop-targets">
                        <h4>Fuel Products</h4>
                        <div class="drop-target" id="fuel-target" data-category="fuel"></div>
                        
                        <h4>Chemical Manufacturing</h4>
                        <div class="drop-target" id="chemical-target" data-category="chemical"></div>
                        
                        <h4>Polymer Production</h4>
                        <div class="drop-target" id="polymer-target" data-category="polymer"></div>
                    </div>
                </div>
                
                <button class="button primary" id="check-sorting-btn">Check Answers</button>
                <button class="button" id="reset-sorting-btn">Reset Game</button>
            </div>
            
            <div class="game-container">
                <h3>Cracking Simulation Game</h3>
                <p>Control the conditions to crack the hydrocarbons and produce the target molecules:</p>
                
                <div class="simulation-container" id="simulation-game">
                    <div class="score-display" id="simulation-score">Level: 1 | Score: 0</div>
                    
                    <div class="flex-container">
                        <div class="flex-item">
                            <h4>Starting Molecule:</h4>
                            <div id="starting-molecule" class="card"></div>
                        </div>
                        
                        <div class="flex-item">
                            <h4>Target Products:</h4>
                            <div id="target-products" class="card"></div>
                        </div>
                    </div>
                    
                    <div class="flex-container">
                        <div class="flex-item">
                            <h4>Cracking Controls:</h4>
                            <div class="card">
                                <p>Cracking Method:</p>
                                <select id="cracking-method" class="simulation-control">
                                    <option value="catalytic">Catalytic Cracking</option>
                                    <option value="steam">Steam Cracking</option>
                                </select>
                                
                                <p>Temperature (°C):</p>
                                <input type="range" id="temperature-control" min="200" max="1000" step="50" value="500" class="simulation-control">
                                <span id="temperature-display">500°C</span>
                                
                                <p>Pressure:</p>
                                <select id="pressure-control" class="simulation-control">
                                    <option value="low">Low</option>
                                    <option value="medium">Medium</option>
                                    <option value="high">High</option>
                                </select>
                                
                                <p>Catalyst (for catalytic cracking):</p>
                                <select id="catalyst-control" class="simulation-control">
                                    <option value="zeolite">Zeolite</option>
                                    <option value="alumina">Alumina</option>
                                    <option value="silica">Silica-Alumina</option>
                                </select>
                                
                                <button class="button primary" id="run-simulation-btn">Run Cracking Process</button>
                            </div>
                        </div>
                        
                        <div class="flex-item">
                            <h4>Results:</h4>
                            <div id="simulation-results" class="card">
                                <p>Set your parameters and run the cracking process to see results...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
    <!-- Result Modal -->
    <div class="modal" id="result-modal">
        <div class="modal-content">
            <span class="modal-close">&times;</span>
            <h3 id="result-title">Results</h3>
            <p id="result-message"></p>
            <button class="button primary" id="modal-continue-btn">Continue</button>
        </div>
    </div>
    
    <footer>
        <div class="container">
            <p>Interactive GCSE Chemistry Lesson: Cracking Hydrocarbons</p>
            <p>Created for educational purposes</p>
        </div>
    </footer>
    
    <script>
        // Navigation
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Update navigation links
                document.querySelectorAll('.nav-link').forEach(l => l.classList.remove('active'));
                this.classList.add('active');
                
                // Show appropriate section
                const sectionId = this.getAttribute('data-section');
                document.querySelectorAll('section').forEach(section => {
                    section.classList.remove('active');
                });
                document.getElementById(sectionId).classList.add('active');
            });
        });
        
        // Tab Navigation
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function() {
                // Update tabs
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                // Show appropriate content
                const tabId = this.getAttribute('data-tab');
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(tabId).classList.add('active');
            });
        });
        
        // Modal Functionality
        const modal = document.getElementById('result-modal');
        const modalClose = document.querySelector('.modal-close');
        const modalContinueBtn = document.getElementById('modal-continue-btn');
        
        function showModal(title, message) {
            document.getElementById('result-title').textContent = title;
            document.getElementById('result-message').textContent = message;
            modal.style.display = 'flex';
        }
        
        function closeModal() {
            modal.style.display = 'none';
        }
        
        modalClose.addEventListener('click', closeModal);
        modalContinueBtn.addEventListener('click', closeModal);
        
        window.addEventListener('click', function(event) {
            if (event.target === modal) {
                closeModal();
            }
        });
        
        // Cracking Animation with molecular representation
        const crackingAnimation = document.getElementById('cracking-animation');
        const startCrackingBtn = document.getElementById('start-cracking-animation');
        const resetCrackingBtn = document.getElementById('reset-cracking-animation');
        
        let animationInterval;
        
        // Helper function to create an atom
        function createAtom(type, x, y, id = null) {
            const atom = document.createElement('div');
            atom.className = `atom ${type}-atom`;
            if (id) atom.id = id;
            
            atom.style.position = 'absolute';
            atom.style.left = `${x}px`;
            atom.style.top = `${y}px`;
            atom.style.width = type === 'carbon' ? '24px' : '16px';
            atom.style.height = type === 'carbon' ? '24px' : '16px';
            atom.style.borderRadius = '50%';
            atom.style.backgroundColor = type === 'carbon' ? '#333' : '#f1f1f1';
            atom.style.border = '1px solid #000';
            atom.style.display = 'flex';
            atom.style.alignItems = 'center';
            atom.style.justifyContent = 'center';
            atom.style.color = type === 'carbon' ? 'white' : 'black';
            atom.style.fontSize = '12px';
            atom.style.fontWeight = 'bold';
            atom.style.zIndex = '2';
            atom.textContent = type === 'carbon' ? 'C' : 'H';
            atom.style.transition = 'all 0.5s ease-in-out';
            
            return atom;
        }
        
        // Helper function to create a bond
        function createBond(x1, y1, x2, y2, isDouble = false, id = null) {
            const bondContainer = document.createElement('div');
            bondContainer.className = isDouble ? 'double-bond' : 'single-bond';
            if (id) bondContainer.id = id;
            
            bondContainer.style.position = 'absolute';
            bondContainer.style.zIndex = '1';
            bondContainer.style.transition = 'all 0.5s ease-in-out';
            
            // Calculate length and angle
            const length = Math.sqrt(Math.pow(x2 - x1, 2) + Math.pow(y2 - y1, 2));
            const angle = Math.atan2(y2 - y1, x2 - x1) * (180 / Math.PI);
            
            bondContainer.style.width = `${length}px`;
            bondContainer.style.height = isDouble ? '6px' : '2px';
            bondContainer.style.left = `${x1}px`;
            bondContainer.style.top = `${y1}px`;
            bondContainer.style.transformOrigin = '0 0';
            bondContainer.style.transform = `rotate(${angle}deg)`;
            
            if (isDouble) {
                const line1 = document.createElement('div');
                line1.style.position = 'absolute';
                line1.style.top = '0px';
                line1.style.width = '100%';
                line1.style.height = '2px';
                line1.style.backgroundColor = '#555';
                
                const line2 = document.createElement('div');
                line2.style.position = 'absolute';
                line2.style.bottom = '0px';
                line2.style.width = '100%';
                line2.style.height = '2px';
                line2.style.backgroundColor = '#555';
                
                bondContainer.appendChild(line1);
                bondContainer.appendChild(line2);
            } else {
                bondContainer.style.backgroundColor = '#555';
            }
            
            return bondContainer;
        }
        
        function setupCrackingAnimation() {
            crackingAnimation.innerHTML = '';
            crackingAnimation.style.height = '400px'; // Make animation taller
            
            // Create parent container for the molecule
            const largeParent = document.createElement('div');
            largeParent.className = 'molecule-parent';
            largeParent.id = 'large-molecule';
            largeParent.style.position = 'absolute';
            largeParent.style.left = '50%';
            largeParent.style.top = '30px';
            largeParent.style.transform = 'translateX(-50%)';
            largeParent.style.width = '360px';
            largeParent.style.height = '120px';
            largeParent.style.transition = 'all 0.5s ease-in-out';
            
            // Create hexadecane C16H34 (simplified linear representation)
            // Carbon backbone first (16 carbons in a line)
            const carbonSpacing = 30;
            const startX = 10;
            const carbonY = 60;
            
            // Create the carbon chain
            for (let i = 0; i < 16; i++) {
                const x = startX + (i * carbonSpacing);
                const carbon = createAtom('carbon', x, carbonY, `c${i}`);
                largeParent.appendChild(carbon);
                
                // Add hydrogen atoms (simplified, just 2 for most carbons)
                // First and last carbon get 3 hydrogens
                const numH = (i === 0 || i === 15) ? 3 : 2;
                
                for (let h = 0; h < numH; h++) {
                    let hx = x;
                    let hy = carbonY;
                    
                    if (i === 0) {
                        // First carbon
                        if (h === 0) { hx -= 15; hy -= 10; }
                        else if (h === 1) { hx -= 15; hy += 10; }
                        else { hx -= 15; }
                    } else if (i === 15) {
                        // Last carbon
                        if (h === 0) { hx += 15; hy -= 10; }
                        else if (h === 1) { hx += 15; hy += 10; }
                        else { hx += 15; }
                    } else {
                        // Middle carbons
                        if (h === 0) { hy -= 15; }
                        else { hy += 15; }
                    }
                    
                    const hydrogen = createAtom('hydrogen', hx, hy, `h${i}_${h}`);
                    largeParent.appendChild(hydrogen);
                    
                    // Add C-H bond
                    const hBond = createBond(x + 12, carbonY + 12, hx + 8, hy + 8);
                    largeParent.appendChild(hBond);
                }
                
                // Add C-C bonds (except for the last carbon)
                if (i < 15) {
                    const ccBond = createBond(x + 24, carbonY + 12, x + carbonSpacing, carbonY + 12, false, `cc${i}`);
                    largeParent.appendChild(ccBond);
                }
            }
            
            // Add molecule formula label
            const formulaLabel = document.createElement('div');
            formulaLabel.style.position = 'absolute';
            formulaLabel.style.bottom = '-35px';
            formulaLabel.style.left = '50%';
            formulaLabel.style.transform = 'translateX(-50%)';
            formulaLabel.style.fontWeight = 'bold';
            formulaLabel.textContent = 'C₁₆H₃₄ (Hexadecane)';
            largeParent.appendChild(formulaLabel);
            
            crackingAnimation.appendChild(largeParent);
            
            // Add heat indicator
            const heatIndicator = document.createElement('div');
            heatIndicator.style.position = 'absolute';
            heatIndicator.style.bottom = '20px';
            heatIndicator.style.width = '100%';
            heatIndicator.style.textAlign = 'center';
            heatIndicator.style.color = '#e74c3c';
            heatIndicator.style.fontWeight = 'bold';
            heatIndicator.style.fontSize = '24px';
            heatIndicator.innerHTML = '🔥 Heat Energy / Catalyst 🔥';
            
            crackingAnimation.appendChild(heatIndicator);
            
            // Add cracking point indicator (initially hidden)
            const crackPoint = document.createElement('div');
            crackPoint.id = 'crack-point';
            crackPoint.style.position = 'absolute';
            crackPoint.style.width = '30px';
            crackPoint.style.height = '30px';
            crackPoint.style.backgroundColor = 'transparent';
            crackPoint.style.borderRadius = '50%';
            crackPoint.style.border = '3px dashed #e74c3c';
            crackPoint.style.left = `${startX + 7*carbonSpacing + 12}px`;
            crackPoint.style.top = `${carbonY}px`;
            crackPoint.style.transform = 'translate(-50%, -50%)';
            crackPoint.style.opacity = '0';
            crackPoint.style.transition = 'opacity 0.5s';
            crackPoint.style.zIndex = '3';
            
            crackingAnimation.appendChild(crackPoint);
        }
        
        function runCrackingAnimation() {
            const largeMolecule = document.getElementById('large-molecule');
            
            // First stage: move the large molecule to the center
            setTimeout(() => {
                largeMolecule.style.top = '100px';
            }, 500);
            
            // Second stage: show cracking point
            setTimeout(() => {
                const crackPoint = document.getElementById('crack-point');
                crackPoint.style.top = '172px'; // Adjust to match new position
                crackPoint.style.opacity = '1';
                
                // Make the C-C bond that will break pulse
                const crackBond = document.querySelector('#cc7');
                if (crackBond) {
                    crackBond.style.backgroundColor = '#e74c3c';
                    crackBond.style.animation = 'pulse 1s infinite';
                }
            }, 1500);
            
            // Third stage: break apart
            setTimeout(() => {
                // Hide crack point
                const crackPoint = document.getElementById('crack-point');
                crackPoint.style.opacity = '0';
                
                // Hide the breaking bond
                const crackBond = document.querySelector('#cc7');
                if (crackBond) {
                    crackBond.style.opacity = '0';
                }
                
                // Create two smaller molecule containers
                const alkaneParent = document.createElement('div');
                alkaneParent.className = 'molecule-parent';
                alkaneParent.id = 'alkane-molecule';
                alkaneParent.style.position = 'absolute';
                alkaneParent.style.left = '30%';
                alkaneParent.style.top = '180px';
                alkaneParent.style.width = '150px';
                alkaneParent.style.height = '120px';
                alkaneParent.style.opacity = '0';
                alkaneParent.style.transition = 'all 0.5s ease-in-out';
                
                const alkeneParent = document.createElement('div');
                alkeneParent.className = 'molecule-parent';
                alkeneParent.id = 'alkene-molecule';
                alkeneParent.style.position = 'absolute';
                alkeneParent.style.right = '30%';
                alkeneParent.style.top = '180px';
                alkeneParent.style.width = '150px';
                alkeneParent.style.height = '120px';
                alkeneParent.style.opacity = '0';
                alkeneParent.style.transition = 'all 0.5s ease-in-out';
                
                // Create octane (C8H18) - left product
                const alkaneStartX = 10;
                const alkaneY = 60;
                
                for (let i = 0; i < 8; i++) {
                    const x = alkaneStartX + (i * 20);
                    const carbon = createAtom('carbon', x, alkaneY);
                    alkaneParent.appendChild(carbon);
                    
                    // Add hydrogens
                    const numH = (i === 0 || i === 7) ? 3 : 2;
                    
                    for (let h = 0; h < numH; h++) {
                        let hx = x;
                        let hy = alkaneY;
                        
                        if (i === 0) {
                            // First carbon
                            if (h === 0) { hx -= 10; hy -= 8; }
                            else if (h === 1) { hx -= 10; hy += 8; }
                            else { hx -= 10; }
                        } else if (i === 7) {
                            // Last carbon
                            if (h === 0) { hx += 10; hy -= 8; }
                            else if (h === 1) { hx += 10; hy += 8; }
                            else { hx += 10; }
                        } else {
                            // Middle carbons
                            if (h === 0) { hy -= 10; }
                            else { hy += 10; }
                        }
                        
                        const hydrogen = createAtom('hydrogen', hx, hy);
                        alkaneParent.appendChild(hydrogen);
                        
                        // Add C-H bond
                        const hBond = createBond(x + 12, alkaneY + 12, hx + 8, hy + 8);
                        alkaneParent.appendChild(hBond);
                    }
                    
                    // Add C-C bonds
                    if (i < 7) {
                        const ccBond = createBond(x + 24, alkaneY + 12, x + 20, alkaneY + 12);
                        alkaneParent.appendChild(ccBond);
                    }
                }
                
                // Add formula label
                const alkaneLabel = document.createElement('div');
                alkaneLabel.style.position = 'absolute';
                alkaneLabel.style.bottom = '-35px';
                alkaneLabel.style.left = '50%';
                alkaneLabel.style.transform = 'translateX(-50%)';
                alkaneLabel.style.fontWeight = 'bold';
                alkaneLabel.textContent = 'C₈H₁₈ (Octane)';
                alkaneParent.appendChild(alkaneLabel);
                
                // Create octene (C8H16) with double bond - right product
                const alkeneStartX = 10;
                const alkeneY = 60;
                
                for (let i = 0; i < 8; i++) {
                    const x = alkeneStartX + (i * 20);
                    const carbon = createAtom('carbon', x, alkeneY);
                    alkeneParent.appendChild(carbon);
                    
                    // Add hydrogens (fewer for carbons with double bond)
                    const numH = (i === 0 || i === 7) ? 3 : (i === 1 || i === 2) ? 1 : 2;
                    
                    for (let h = 0; h < numH; h++) {
                        let hx = x;
                        let hy = alkeneY;
                        
                        if (i === 0) {
                            // First carbon
                            if (h === 0) { hx -= 10; hy -= 8; }
                            else if (h === 1) { hx -= 10; hy += 8; }
                            else { hx -= 10; }
                        } else if (i === 7) {
                            // Last carbon
                            if (h === 0) { hx += 10; hy -= 8; }
                            else if (h === 1) { hx += 10; hy += 8; }
                            else { hx += 10; }
                        } else if (i === 1 || i === 2) {
                            // Double bond carbons
                            hy -= 10;
                        } else {
                            // Other middle carbons
                            if (h === 0) { hy -= 10; }
                            else { hy += 10; }
                        }
                        
                        const hydrogen = createAtom('hydrogen', hx, hy);
                        alkeneParent.appendChild(hydrogen);
                        
                        // Add C-H bond
                        const hBond = createBond(x + 12, alkeneY + 12, hx + 8, hy + 8);
                        alkeneParent.appendChild(hBond);
                    }
                    
                    // Add C-C bonds (with double bond between C1-C2)
                    if (i < 7) {
                        const isDouble = (i === 1); // Double bond between 2nd and 3rd carbon
                        const ccBond = createBond(x + 24, alkeneY + 12, x + 20, alkeneY + 12, isDouble);
                        alkeneParent.appendChild(ccBond);
                    }
                }
                
                // Add formula label
                const alkeneLabel = document.createElement('div');
                alkeneLabel.style.position = 'absolute';
                alkeneLabel.style.bottom = '-35px';
                alkeneLabel.style.left = '50%';
                alkeneLabel.style.transform = 'translateX(-50%)';
                alkeneLabel.style.fontWeight = 'bold';
                alkeneLabel.textContent = 'C₈H₁₆ (1-Octene)';
                alkeneParent.appendChild(alkeneLabel);
                
                // Add to container
                crackingAnimation.appendChild(alkaneParent);
                crackingAnimation.appendChild(alkeneParent);
                
                // Hide original molecule
                largeMolecule.style.opacity = '0';
                
                // Fade in smaller molecules
                setTimeout(() => {
                    alkaneParent.style.opacity = '1';
                    alkeneParent.style.opacity = '1';
                }, 100);
                
                // Move molecules to final positions
                setTimeout(() => {
                    alkaneParent.style.left = '25%';
                    alkeneParent.style.right = '25%';
                    
                    // Add labels
                    const label1 = document.createElement('div');
                    label1.style.position = 'absolute';
                    label1.style.top = '300px';
                    label1.style.left = '25%';
                    label1.style.transform = 'translateX(-50%)';
                    label1.textContent = 'Alkane';
                    label1.style.fontWeight = 'bold';
                    
                    const label2 = document.createElement('div');
                    label2.style.position = 'absolute';
                    label2.style.top = '300px';
                    label2.style.right = '25%';
                    label2.style.transform = 'translateX(50%)';
                    label2.textContent = 'Alkene';
                    label2.style.fontWeight = 'bold';
                    
                    crackingAnimation.appendChild(label1);
                    crackingAnimation.appendChild(label2);
                    
                    // Add equation
                    const equation = document.createElement('div');
                    equation.style.position = 'absolute';
                    equation.style.bottom = '60px';
                    equation.style.width = '100%';
                    equation.style.textAlign = 'center';
                    equation.style.fontWeight = 'bold';
                    equation.textContent = 'C₁₆H₃₄ → C₈H₁₈ + C₈H₁₆';
                    
                    crackingAnimation.appendChild(equation);
                    
                    // Add note about double bond
                    const doubleBondNote = document.createElement('div');
                    doubleBondNote.style.position = 'absolute';
                    doubleBondNote.style.bottom = '80px';
                    doubleBondNote.style.right = '25%';
                    doubleBondNote.style.transform = 'translateX(50%)';
                    doubleBondNote.style.color = '#e74c3c';
                    doubleBondNote.style.fontSize = '14px';
                    doubleBondNote.textContent = '← Notice the double bond';
                    
                    crackingAnimation.appendChild(doubleBondNote);
                }, 1000);
            }, 3000);
        }
        
        startCrackingBtn.addEventListener('click', function() {
            setupCrackingAnimation();
            runCrackingAnimation();
        });
        
        resetCrackingBtn.addEventListener('click', function() {
            setupCrackingAnimation();
        });
        
        // Initialize cracking animation
        setupCrackingAnimation();
        
        // Bromine Water Test
        const bromineTestTube = document.getElementById('bromine-liquid');
        const addAlkeneBtn = document.getElementById('add-alkene-btn');
        const resetTestBtn = document.getElementById('reset-test-btn');
        
        addAlkeneBtn.addEventListener('click', function() {
            // Add the meniscus if not already there
            if (!document.getElementById('bromine-meniscus')) {
                const meniscus = document.createElement('div');
                meniscus.id = 'bromine-meniscus';
                meniscus.className = 'test-tube-meniscus';
                document.getElementById('bromine-test-tube').appendChild(meniscus);
            }
            
            // Change color from orange-brown to colorless with transition
            bromineTestTube.style.backgroundColor = 'rgba(255, 255, 255, 0.4)';
            
            // Create bubbles effect for reaction
            createBubbles();
            
            // Update the explanation
            updateBromineExplanation(true);
        });
        
        resetTestBtn.addEventListener('click', function() {
            // Change back to orange-brown bromine water
            bromineTestTube.style.backgroundColor = 'rgba(178, 81, 0, 0.8)';
            
            // Remove any bubbles
            const bubbles = document.querySelectorAll('.bubble');
            bubbles.forEach(bubble => bubble.remove());
            
            // Reset the explanation
            updateBromineExplanation(false);
        });
        
        function createBubbles() {
            // Create some bubbles to show reaction
            const testTube = document.getElementById('bromine-test-tube');
            
            for (let i = 0; i < 8; i++) {
                const bubble = document.createElement('div');
                bubble.className = 'bubble';
                bubble.style.position = 'absolute';
                bubble.style.width = `${Math.random() * 8 + 4}px`;
                bubble.style.height = bubble.style.width;
                bubble.style.backgroundColor = 'rgba(255, 255, 255, 0.6)';
                bubble.style.borderRadius = '50%';
                bubble.style.bottom = `${Math.random() * 60 + 20}%`;
                bubble.style.left = `${Math.random() * 60 + 20}%`;
                bubble.style.animation = `rise ${Math.random() * 3 + 2}s linear forwards`;
                testTube.appendChild(bubble);
                
                // Remove bubble after animation
                setTimeout(() => {
                    bubble.remove();
                }, 5000);
            }
        }
        
        function updateBromineExplanation(reacted) {
            const reactionInfo = document.getElementById('bromine-reaction-info');
            if (!reactionInfo) return;
            
            if (reacted) {
                reactionInfo.innerHTML = `
                    <p><strong>Bromine water reaction with alkene:</strong></p>
                    <p>The orange-brown color disappears as bromine adds across the C=C double bond:</p>
                    <p class="chemical-equation">C₂H₄ + Br₂ → C₂H₄Br₂</p>
                    <p>(Ethene + Bromine → Dibromoethane)</p>
                    <p>This decolorization is a <strong>positive test result</strong> for an alkene.</p>
                `;
            } else {
                reactionInfo.innerHTML = `
                    <p><strong>Bromine water test for alkenes:</strong></p>
                    <p>Bromine water is orange-brown in color.</p>
                    <p>When an alkene is added, the bromine will react with the carbon-carbon double bond.</p>
                    <p>Click "Add Alkene" to see the reaction.</p>
                `;
            }
        }
        
        // Initialize the style for bubbles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes rise {
                0% {
                    transform: translateY(0) scale(1);
                    opacity: 0.7;
                }
                100% {
                    transform: translateY(-100px) scale(1.5);
                    opacity: 0;
                }
            }
            
            .chemical-equation {
                font-weight: bold;
                margin: 10px 0;
            }
        `;
        document.head.appendChild(style);
        
        // Multiple Choice Questions
        const questionsContainer = document.getElementById('questions-container');
        const questionsProgress = document.getElementById('questions-progress');
        const checkAnswersBtn = document.getElementById('check-answers-btn');
        const resetQuizBtn = document.getElementById('reset-quiz-btn');
        
        const questions = [
            {
                question: "What is the main purpose of cracking hydrocarbons?",
                options: [
                    "To make them more reactive",
                    "To break down larger molecules into smaller, more useful ones",
                    "To combine small molecules into larger ones",
                    "To remove impurities from crude oil"
                ],
                correctAnswer: 1
            },
            {
                question: "What are the two main methods of cracking?",
                options: [
                    "Thermal cracking and pressure cracking",
                    "Catalytic cracking and steam cracking",
                    "Hot cracking and cold cracking",
                    "Chemical cracking and physical cracking"
                ],
                correctAnswer: 1
            },
            {
                question: "What temperature range is used for catalytic cracking?",
                options: [
                    "100-200°C",
                    "300-400°C",
                    "450-500°C",
                    "800-900°C"
                ],
                correctAnswer: 2
            },
            {
                question: "What temperature range is used for steam cracking?",
                options: [
                    "100-200°C",
                    "300-400°C",
                    "450-500°C",
                    "800-900°C"
                ],
                correctAnswer: 3
            },
            {
                question: "What are the main products of cracking?",
                options: [
                    "Alkanes only",
                    "Alkenes only",
                    "Alkanes and alkenes",
                    "Carboxylic acids and alcohols"
                ],
                correctAnswer: 2
            },
            {
                question: "What color is bromine water before reacting with an alkene?",
                options: [
                    "Colorless",
                    "Blue",
                    "Green",
                    "Orange-brown"
                ],
                correctAnswer: 3
            },
            {
                question: "What color does bromine water change to after reacting with an alkene?",
                options: [
                    "Colorless",
                    "Blue",
                    "Green",
                    "Dark brown"
                ],
                correctAnswer: 0
            },
            {
                question: "Which of these is a major use of alkenes?",
                options: [
                    "As biological catalysts",
                    "As food preservatives",
                    "To produce polymers",
                    "As direct fuel for vehicles"
                ],
                correctAnswer: 2
            }
        ];
        
        function setupQuiz() {
            questionsContainer.innerHTML = '';
            let questionHTML = '';
            
            questions.forEach((q, index) => {
                questionHTML += `
                    <div class="question-container" id="question-${index}">
                        <h4>Question ${index + 1}:</h4>
                        <p>${q.question}</p>
                        <div class="options-container">
                `;
                
                q.options.forEach((option, optIndex) => {
                    questionHTML += `
                        <div class="option" data-question="${index}" data-option="${optIndex}">
                            ${option}
                        </div>
                    `;
                });
                
                questionHTML += `
                        </div>
                        <div class="feedback correct" id="feedback-correct-${index}">Correct! Well done.</div>
                        <div class="feedback incorrect" id="feedback-incorrect-${index}">Incorrect. Try again.</div>
                    </div>
                `;
            });
            
            questionsContainer.innerHTML = questionHTML;
            
            // Add event listeners to options
            document.querySelectorAll('.option').forEach(option => {
                option.addEventListener('click', function() {
                    const questionIndex = this.getAttribute('data-question');
                    const selectedOption = this.getAttribute('data-option');
                    
                    // Remove selected class from all options in this question
                    document.querySelectorAll(`.option[data-question="${questionIndex}"]`).forEach(opt => {
                        opt.classList.remove('selected');
                    });
                    
                    // Add selected class to clicked option
                    this.classList.add('selected');
                });
            });
        }
        
        function checkAnswers() {
            let correctCount = 0;
            let totalAnswered = 0;
            
            questions.forEach((q, index) => {
                const selectedOption = document.querySelector(`.option[data-question="${index}"].selected`);
                const correctFeedback = document.getElementById(`feedback-correct-${index}`);
                const incorrectFeedback = document.getElementById(`feedback-incorrect-${index}`);
                
                correctFeedback.style.display = 'none';
                incorrectFeedback.style.display = 'none';
                
                if (selectedOption) {
                    totalAnswered++;
                    const selectedIndex = parseInt(selectedOption.getAttribute('data-option'));
                    
                    if (selectedIndex === q.correctAnswer) {
                        correctCount++;
                        correctFeedback.style.display = 'block';
                    } else {
                        incorrectFeedback.style.display = 'block';
                    }
                }
            });
            
            // Update progress bar
            const progressPercentage = (correctCount / questions.length) * 100;
            questionsProgress.style.width = `${progressPercentage}%`;
            
            // Show result modal if all questions are answered
            if (totalAnswered === questions.length) {
                showModal(
                    "Quiz Results", 
                    `You got ${correctCount} out of ${questions.length} questions correct (${Math.round(progressPercentage)}%)!`
                );
            } else {
                showModal(
                    "Quiz Incomplete", 
                    `You've only answered ${totalAnswered} out of ${questions.length} questions. Try to answer them all!`
                );
            }
        }
        
        checkAnswersBtn.addEventListener('click', checkAnswers);
        resetQuizBtn.addEventListener('click', setupQuiz);
        
        // Equations for formula completion
        const equationsContainer = document.getElementById('equations-container');
        const checkEquationsBtn = document.getElementById('check-equations-btn');
        const resetEquationsBtn = document.getElementById('reset-equations-btn');
        
        const equations = [
            {
                type: 'reactant',
                html: `C<sub>?</sub>H<sub>?</sub> → C<sub>4</sub>H<sub>10</sub> + C<sub>6</sub>H<sub>12</sub>`,
                answers: {
                    carbon: 10,
                    hydrogen: 22
                },
                hint: "Remember, the starting alkane needs enough carbons for both products. For hydrogen, the formula for alkanes is C<sub>n</sub>H<sub>2n+2</sub> and for alkenes is C<sub>n</sub>H<sub>2n</sub>."
            },
            {
                type: 'alkane',
                html: `C<sub>12</sub>H<sub>26</sub> → C<sub>?</sub>H<sub>?</sub> + C<sub>5</sub>H<sub>10</sub>`,
                answers: {
                    carbon: 7,
                    hydrogen: 16
                },
                hint: "The number of carbon atoms must be conserved. For the hydrogen in the alkane product, remember the formula C<sub>n</sub>H<sub>2n+2</sub>."
            },
            {
                type: 'alkene',
                html: `C<sub>16</sub>H<sub>34</sub> → C<sub>10</sub>H<sub>22</sub> + C<sub>?</sub>H<sub>?</sub>`,
                answers: {
                    carbon: 6,
                    hydrogen: 12
                },
                hint: "The number of carbon atoms must be conserved. For the hydrogen in the alkene product, remember the formula C<sub>n</sub>H<sub>2n</sub>."
            },
            {
                type: 'complex-reactant',
                html: `C<sub>?</sub>H<sub>?</sub> → C<sub>8</sub>H<sub>18</sub> + C<sub>10</sub>H<sub>20</sub>`,
                answers: {
                    carbon: 18,
                    hydrogen: 38
                },
                hint: "Add up the carbon atoms in the products. For hydrogen, remember that in an alkane, the hydrogen count is 2n+2, and in an alkene, it's 2n."
            },
            {
                type: 'terminal-alkene',
                html: `C<sub>14</sub>H<sub>30</sub> → C<sub>8</sub>H<sub>18</sub> + C<sub>6</sub>H<sub>?</sub>`,
                answers: {
                    hydrogen: 12
                },
                hint: "For an alkene, the formula is C<sub>n</sub>H<sub>2n</sub>. So for C<sub>6</sub>, the hydrogen count would be 2×6."
            }
        ];
        
        function setupEquations() {
            equationsContainer.innerHTML = '';
            let equationHTML = '';
            
            equations.forEach((eq, index) => {
                let questionHTML = `
                    <div class="equation-container" id="equation-${index}">
                        <h4>Equation ${index + 1}:</h4>
                        <div class="formula-equation">
                `;
                
                // Replace the ? marks with input fields
                const inputFormula = eq.html.replace(/\?/g, (match, offset, string) => {
                    // Check if this ? is for carbon or hydrogen
                    const prevChar = string.charAt(offset - 1);
                    const inputName = prevChar === 'C' ? 'carbon' : 'hydrogen';
                    return `<input type="number" min="1" max="50" class="subscript-input" 
                            id="${inputName}-${index}" placeholder="?">`;
                });
                
                questionHTML += inputFormula;
                
                questionHTML += `
                        </div>
                        <div class="feedback correct" id="feedback-correct-${index}">Correct! The formula balances correctly.</div>
                        <div class="feedback incorrect" id="feedback-incorrect-${index}">Incorrect. Check your carbon and hydrogen counts.</div>
                        <div class="debug-info" id="debug-${index}" style="font-size: 0.8rem; color: #666;"></div>
                        <button class="button small" id="hint-btn-${index}">Show Hint</button>
                        <div class="hint" id="hint-${index}" style="display: none;">${eq.hint}</div>
                    </div>
                `;
                
                equationHTML += questionHTML;
            });
            
            equationsContainer.innerHTML = equationHTML;
            
            // Add event listeners for hint buttons
            equations.forEach((eq, index) => {
                const hintBtn = document.getElementById(`hint-btn-${index}`);
                const hint = document.getElementById(`hint-${index}`);
                
                hintBtn.addEventListener('click', function() {
                    if (hint.style.display === 'none') {
                        hint.style.display = 'block';
                        hintBtn.textContent = 'Hide Hint';
                    } else {
                        hint.style.display = 'none';
                        hintBtn.textContent = 'Show Hint';
                    }
                });
            });
        }
        
        function checkEquations() {
            let correctCount = 0;
            
            equations.forEach((eq, index) => {
                const feedbackCorrect = document.getElementById(`feedback-correct-${index}`);
                const feedbackIncorrect = document.getElementById(`feedback-incorrect-${index}`);
                const debugInfo = document.getElementById(`debug-${index}`);
                
                feedbackCorrect.style.display = 'none';
                feedbackIncorrect.style.display = 'none';
                
                let allCorrect = true;
                let debugText = "";
                
                // Explicit checking for each equation to avoid any logic issues
                if (index === 0) {
                    // Equation 1: C?H? → C₄H₁₀ + C₆H₁₂
                    const carbonInput = document.getElementById(`carbon-0`);
                    const hydrogenInput = document.getElementById(`hydrogen-0`);
                    
                    const carbonValue = carbonInput ? carbonInput.value : "";
                    const hydrogenValue = hydrogenInput ? hydrogenInput.value : "";
                    
                    debugText = `You entered: C<sub>${carbonValue}</sub>H<sub>${hydrogenValue}</sub>, Expected: C<sub>10</sub>H<sub>22</sub>`;
                    
                    if (carbonValue === "10" && hydrogenValue === "22") {
                        allCorrect = true;
                    } else {
                        allCorrect = false;
                    }
                }
                else if (index === 1) {
                    // Equation 2: C₁₂H₂₆ → C?H? + C₅H₁₀
                    const carbonInput = document.getElementById(`carbon-1`);
                    const hydrogenInput = document.getElementById(`hydrogen-1`);
                    
                    const carbonValue = carbonInput ? carbonInput.value : "";
                    const hydrogenValue = hydrogenInput ? hydrogenInput.value : "";
                    
                    debugText = `You entered: C<sub>${carbonValue}</sub>H<sub>${hydrogenValue}</sub>, Expected: C<sub>7</sub>H<sub>16</sub>`;
                    
                    if (carbonValue === "7" && hydrogenValue === "16") {
                        allCorrect = true;
                    } else {
                        allCorrect = false;
                    }
                }
                else if (index === 2) {
                    // Equation 3: C₁₆H₃₄ → C₁₀H₂₂ + C?H?
                    const carbonInput = document.getElementById(`carbon-2`);
                    const hydrogenInput = document.getElementById(`hydrogen-2`);
                    
                    const carbonValue = carbonInput ? carbonInput.value : "";
                    const hydrogenValue = hydrogenInput ? hydrogenInput.value : "";
                    
                    debugText = `You entered: C<sub>${carbonValue}</sub>H<sub>${hydrogenValue}</sub>, Expected: C<sub>6</sub>H<sub>12</sub>`;
                    
                    if (carbonValue === "6" && hydrogenValue === "12") {
                        allCorrect = true;
                    } else {
                        allCorrect = false;
                    }
                }
                else if (index === 3) {
                    // Equation 4: C?H? → C₈H₁₈ + C₁₀H₂₀
                    const carbonInput = document.getElementById(`carbon-3`);
                    const hydrogenInput = document.getElementById(`hydrogen-3`);
                    
                    const carbonValue = carbonInput ? carbonInput.value : "";
                    const hydrogenValue = hydrogenInput ? hydrogenInput.value : "";
                    
                    debugText = `You entered: C<sub>${carbonValue}</sub>H<sub>${hydrogenValue}</sub>, Expected: C<sub>18</sub>H<sub>38</sub>`;
                    
                    if (carbonValue === "18" && hydrogenValue === "38") {
                        allCorrect = true;
                    } else {
                        allCorrect = false;
                    }
                }
                else if (index === 4) {
                    // Equation 5: C₁₄H₃₀ → C₈H₁₈ + C₆H?
                    const hydrogenInput = document.getElementById(`hydrogen-4`);
                    const hydrogenValue = hydrogenInput ? hydrogenInput.value : "";
                    
                    debugText = `You entered: C<sub>6</sub>H<sub>${hydrogenValue}</sub>, Expected: C<sub>6</sub>H<sub>12</sub>`;
                    
                    if (hydrogenValue === "12") {
                        allCorrect = true;
                    } else {
                        allCorrect = false;
                    }
                }
                
                // Display feedback
                debugInfo.innerHTML = debugText;
                
                if (allCorrect) {
                    feedbackCorrect.style.display = 'block';
                    correctCount++;
                } else {
                    feedbackIncorrect.style.display = 'block';
                }
            });
            
            if (correctCount === equations.length) {
                showModal(
                    "Excellent Work!", 
                    `You've correctly completed all ${equations.length} hydrocarbon formulas. You understand how to balance cracking equations and determine the correct formulas!`
                );
            } else {
                showModal(
                    "Keep Practicing", 
                    `You got ${correctCount} out of ${equations.length} correct. Remember to check both carbon and hydrogen balance in the equations.`
                );
            }
        }
        
        checkEquationsBtn.addEventListener('click', checkEquations);
        resetEquationsBtn.addEventListener('click', setupEquations);
        
        // Drag and Drop Game
        const draggableItemsContainer = document.getElementById('draggable-items');
        const dropTargets = document.querySelectorAll('.drop-target');
        const checkSortingBtn = document.getElementById('check-sorting-btn');
        const resetSortingBtn = document.getElementById('reset-sorting-btn');
        const sortingScoreDisplay = document.getElementById('sorting-score');
        
        let sortingScore = 0;
        
        const draggableItems = [
            { id: 'ethane', name: 'Ethane (C₂H₆)', category: 'fuel' },
            { id: 'propene', name: 'Propene (C₃H₆)', category: 'chemical' },
            { id: 'butane', name: 'Butane (C₄H₁₀)', category: 'fuel' },
            { id: 'ethene', name: 'Ethene (C₂H₄)', category: 'polymer' },
            { id: 'propane', name: 'Propane (C₃H₈)', category: 'fuel' },
            { id: 'butene', name: 'Butene (C₄H₈)', category: 'polymer' },
            { id: 'hexene', name: 'Hexene (C₆H₁₂)', category: 'chemical' },
            { id: 'pentane', name: 'Pentane (C₅H₁₂)', category: 'fuel' },
            { id: 'styrene', name: 'Styrene', category: 'polymer' }
        ];
        
        function setupDragDrop() {
            draggableItemsContainer.innerHTML = '';
            
            // Shuffle the items
            const shuffledItems = [...draggableItems].sort(() => Math.random() - 0.5);
            
            // Create draggable elements
            shuffledItems.forEach(item => {
                const draggable = document.createElement('div');
                draggable.className = 'draggable';
                draggable.id = item.id;
                draggable.setAttribute('draggable', 'true');
                draggable.setAttribute('data-category', item.category);
                draggable.textContent = item.name;
                
                draggableItemsContainer.appendChild(draggable);
            });
            
            // Clear drop targets
            dropTargets.forEach(target => {
                target.innerHTML = '';
            });
            
            // Reset score
            sortingScore = 0;
            updateSortingScore();
            
            // Add event listeners for drag and drop
            addDragDropEventListeners();
        }
        
        function addDragDropEventListeners() {
            const draggables = document.querySelectorAll('.draggable');
            
            draggables.forEach(draggable => {
                draggable.addEventListener('dragstart', function(e) {
                    e.dataTransfer.setData('text/plain', this.id);
                    this.style.opacity = '0.5';
                });
                
                draggable.addEventListener('dragend', function() {
                    this.style.opacity = '1';
                });
            });
            
            dropTargets.forEach(target => {
                target.addEventListener('dragover', function(e) {
                    e.preventDefault();
                    this.classList.add('highlight');
                });
                
                target.addEventListener('dragleave', function() {
                    this.classList.remove('highlight');
                });
                
                target.addEventListener('drop', function(e) {
                    e.preventDefault();
                    this.classList.remove('highlight');
                    
                    const id = e.dataTransfer.getData('text/plain');
                    const draggable = document.getElementById(id);
                    
                    if (draggable && this.contains(draggable)) {
                        return; // Already in this target
                    }
                    
                    this.appendChild(draggable);
                });
            });
        }
        
        function checkSorting() {
            sortingScore = 0;
            
            dropTargets.forEach(target => {
                const category = target.getAttribute('data-category');
                const items = target.querySelectorAll('.draggable');
                
                items.forEach(item => {
                    const itemCategory = item.getAttribute('data-category');
                    if (itemCategory === category) {
                        sortingScore++;
                        item.style.borderColor = '#2ecc71';
                    } else {
                        item.style.borderColor = '#e74c3c';
                    }
                });
            });
            
            updateSortingScore();
            
            if (sortingScore === draggableItems.length) {
                showModal(
                    "Perfect Sorting!", 
                    "You've correctly sorted all the hydrocarbon products!"
                );
            }
        }
        
        function updateSortingScore() {
            sortingScoreDisplay.textContent = `Score: ${sortingScore} / ${draggableItems.length}`;
        }
        
        checkSortingBtn.addEventListener('click', checkSorting);
        resetSortingBtn.addEventListener('click', setupDragDrop);
        
        // Cracking Simulation Game
        const startingMoleculeDisplay = document.getElementById('starting-molecule');
        const targetProductsDisplay = document.getElementById('target-products');
        const simulationResultsDisplay = document.getElementById('simulation-results');
        const simulationScoreDisplay = document.getElementById('simulation-score');
        const temperatureControl = document.getElementById('temperature-control');
        const temperatureDisplay = document.getElementById('temperature-display');
        const crackingMethodSelect = document.getElementById('cracking-method');
        const pressureSelect = document.getElementById('pressure-control');
        const catalystSelect = document.getElementById('catalyst-control');
        const runSimulationBtn = document.getElementById('run-simulation-btn');
        
        let simulationLevel = 1;
        let simulationScore = 0;
        let currentSimulationTask = null;
        
        const simulationTasks = [
            {
                level: 1,
                startingMolecule: 'Decane (C₁₀H₂₂)',
                targetProducts: 'Ethane (C₂H₆) and Octene (C₈H₁₆)',
                correctMethod: 'catalytic',
                correctTemperature: [450, 500],
                correctPressure: 'medium',
                correctCatalyst: 'zeolite'
            },
            {
                level: 2,
                startingMolecule: 'Dodecane (C₁₂H₂₆)',
                targetProducts: 'Propane (C₃H₈) and Nonene (C₉H₁₈)',
                correctMethod: 'catalytic',
                correctTemperature: [470, 530],
                correctPressure: 'medium',
                correctCatalyst: 'alumina'
            },
            {
                level: 3,
                startingMolecule: 'Hexadecane (C₁₆H₃₄)',
                targetProducts: 'Ethene (C₂H₄) and Tetradecane (C₁₄H₃₀)',
                correctMethod: 'steam',
                correctTemperature: [800, 900],
                correctPressure: 'low',
                correctCatalyst: null
            }
        ];
        
        function setupSimulationGame() {
            simulationLevel = 1;
            simulationScore = 0;
            updateSimulationTask();
            updateSimulationScore();
        }
        
        function updateSimulationTask() {
            currentSimulationTask = simulationTasks.find(task => task.level === simulationLevel);
            
            if (currentSimulationTask) {
                startingMoleculeDisplay.textContent = currentSimulationTask.startingMolecule;
                targetProductsDisplay.textContent = currentSimulationTask.targetProducts;
                simulationResultsDisplay.innerHTML = '<p>Set your parameters and run the cracking process to see results...</p>';
            } else {
                // Game completed
                showModal(
                    "Congratulations!", 
                    `You've completed all levels of the cracking simulation game with a score of ${simulationScore}!`
                );
            }
        }
        
        function updateSimulationScore() {
            simulationScoreDisplay.textContent = `Level: ${simulationLevel} | Score: ${simulationScore}`;
        }
        
        function runSimulation() {
            if (!currentSimulationTask) return;
            
            const method = crackingMethodSelect.value;
            const temperature = parseInt(temperatureControl.value);
            const pressure = pressureSelect.value;
            const catalyst = catalystSelect.value;
            
            let correctCount = 0;
            let feedback = '';
            
            // Check method
            if (method === currentSimulationTask.correctMethod) {
                correctCount++;
                feedback += '<p>✓ Correct cracking method!</p>';
            } else {
                feedback += `<p>✗ Incorrect cracking method. Try using ${currentSimulationTask.correctMethod} cracking instead.</p>`;
            }
            
            // Check temperature
            if (temperature >= currentSimulationTask.correctTemperature[0] && 
                temperature <= currentSimulationTask.correctTemperature[1]) {
                correctCount++;
                feedback += '<p>✓ Correct temperature range!</p>';
            } else {
                feedback += `<p>✗ Incorrect temperature. Try setting it between ${currentSimulationTask.correctTemperature[0]}°C and ${currentSimulationTask.correctTemperature[1]}°C.</p>`;
            }
            
            // Check pressure
            if (pressure === currentSimulationTask.correctPressure) {
                correctCount++;
                feedback += '<p>✓ Correct pressure setting!</p>';
            } else {
                feedback += `<p>✗ Incorrect pressure. Try using ${currentSimulationTask.correctPressure} pressure.</p>`;
            }
            
            // Check catalyst (only if method is catalytic)
            if (method === 'catalytic') {
                if (catalyst === currentSimulationTask.correctCatalyst) {
                    correctCount++;
                    feedback += '<p>✓ Correct catalyst choice!</p>';
                } else {
                    feedback += `<p>✗ Incorrect catalyst. Try using ${currentSimulationTask.correctCatalyst}.</p>`;
                }
            }
            
            // Display results
            let resultsHTML = '<h4>Simulation Results:</h4>';
            
            if (correctCount === 4 || (method === 'steam' && correctCount === 3)) {
                simulationScore++;
                simulationLevel++;
                
                resultsHTML += `
                    <p style="color: green; font-weight: bold;">Success! You've correctly cracked the hydrocarbon.</p>
                    <p>You produced ${currentSimulationTask.targetProducts} successfully.</p>
                    ${feedback}
                    <p style="margin-top: 10px;">Moving to level ${simulationLevel}...</p>
                `;
                
                setTimeout(() => {
                    updateSimulationTask();
                    updateSimulationScore();
                }, 3000);
            } else {
                resultsHTML += `
                    <p style="color: red; font-weight: bold;">The cracking process was unsuccessful.</p>
                    <p>You didn't produce the right products.</p>
                    ${feedback}
                    <p style="margin-top: 10px;">Adjust your parameters and try again.</p>
                `;
            }
            
            simulationResultsDisplay.innerHTML = resultsHTML;
        }
        
        temperatureControl.addEventListener('input', function() {
            temperatureDisplay.textContent = `${this.value}°C`;
        });
        
        crackingMethodSelect.addEventListener('change', function() {
            if (this.value === 'catalytic') {
                catalystSelect.disabled = false;
            } else {
                catalystSelect.disabled = true;
            }
        });
        
        runSimulationBtn.addEventListener('click', runSimulation);
        
        // Initialize all components
        setupQuiz();
        setupEquations();
        setupDragDrop();
        setupSimulationGame();
    </script>
</body>
</html>
